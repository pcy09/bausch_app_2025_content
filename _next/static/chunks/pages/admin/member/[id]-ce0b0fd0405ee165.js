(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8878],{82068:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return V}});var r=n(11163),a=n(24295);n(36368);var l=n(17621);n(82451);var i=n(60099);n(35797);var o=n(64749);n(45673);var d=n(8448),c=n(59499),s=n(4730);n(48980);var u=n(20838);n(53294);var f=n(56697),m=n(50029),p=n(87794),h=n.n(p),b=n(9473),v=n(67294),Z=n(43676),y=n(87536),g=n(18383),I=n(7158),w=n(31613),S=n(47255),x=n(27484),k=n.n(x),D=n(86752),_=n(11475),L=n(853),T=n(25285),Y=n(46140),C=n(64400),j=n(94386),R=["ref","value"],A=["ref","value"],O=["ref","value"],N=["ref","value"],E=["ref","value"],z=["ref","value"],M=["ref","value"],X=["ref","value"],B=["ref","value"],P=["ref","value"],H=["ref","value"],Q=["ref","value"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tabMenuList=function(){return[{label:"기본 정보",key:"basicInfo"},{label:"마케팅 정보",key:"marketingInfo"},{label:"회원 도수 정보",key:"purchaseInfo"},{label:"부가 정보",key:"additionalInfo"},{label:"마이 스토어 변경 이력",key:"myPointStoreChangeHistory"},{label:"구매 이력",key:"productPurchaseHistory"}]},AdminUserDetailTemplate=function(){var e,t=[{title:"스토어 코드",dataIndex:"storeCode",align:"center"},{title:"스토어명",dataIndex:"storeName",align:"center",render:function(e,t){return(0,j.tZ)("a",{href:"/admin/store/manage/".concat(t.storeId),target:"_blank",children:e})}},{title:"변경일",dataIndex:"modifiedDate",align:"center",render:function(e,t){return"".concat(k()(e).format("YYYY-MM-DD"))}}],n=[{title:"No",dataIndex:"transactionInfoId",align:"center"},{title:"거래 ID",dataIndex:"transactionCode",align:"center",render:function(e,t){return(0,j.tZ)("a",{href:"#",onClick:function(e){e.preventDefault(),window.open("/admin/order/coupon-sales/".concat(t.transactionInfoId),"_blank")},children:e})}},{title:"스토어 코드",dataIndex:"storeCode",align:"center"},{title:"스토어 명",dataIndex:"storeName",align:"center",render:function(e,t){return(0,j.tZ)("a",{href:"#",onClick:function(e){e.preventDefault(),window.open("/admin/store/manage/".concat(t.storeId),"_blank")},children:e})}},{title:"쿠폰 유형",dataIndex:"couponType",align:"center"},{title:"쿠폰명",dataIndex:"couponName",align:"center"},{title:"수량",dataIndex:"transactionTotalQuantity",align:"center"},{title:"구매일",dataIndex:"transactionTime",align:"center",render:function(e,t){return"".concat(k()(null==ec?void 0:ec.transactionTime).format("YYYY-MM-DD"))}},{title:"거래 상태",dataIndex:"orderStatus",align:"center",render:function(e){return(0,j.tZ)(l.d1,{status:e})}}],a=(0,r.useRouter)(),c=(0,r.useRouter)(),p=c.query;c.push;var x=(0,b.I0)(),V=(0,y.cI)({}),G=V.handleSubmit,F=V.control,$=V.setValue;V.formState.errors;var handleError=function(e){null!=e&&e.storeName&&x(errorSnackOpen({message:"스토어 명 누락",description:"스토어 명을 입력해주세요."}))},J=(0,C.Z)(["myopia","asti","lensAdd","axis","memberType"]),W=J.myopia,ee=J.asti,et=J.lensAdd,en=J.axis,er=J.memberType,ea=(0,b.v9)(function(e){return null==e?void 0:e.member.memberDetail}),el=ea.basicInfo,ei=ea.marketingInfo,eo=ea.eyePrescriptionInfo,ed=ea.additionalInfo,ec=ea.transactionHistoryInfo,es=ea.storeChangeHistoryInfo,eu=(0,v.useRef)(null),ef=(0,v.useState)(!1),em=ef[0],ep=ef[1],eh=(0,v.useState)([]),eb=eh[0],ev=eh[1],eZ=(0,v.useState)([]),ey=eZ[0],eg=eZ[1],eI=(0,v.useState)([]),ew=eI[0],eS=eI[1],ex=(0,v.useState)([]),ek=ex[0],eD=ex[1],e_=(0,v.useState)([]),eL=e_[0],eT=e_[1],eY=(0,v.useState)({storeCode:"",storeId:"",storeName:""}),eC=eY[0],ej=eY[1];(0,v.useEffect)(function(){er&&ev((0,D.RG)(er))},[er]),(0,v.useEffect)(function(){W&&eg((0,D.RG)(W)),ee&&eS((0,D.RG)(ee)),en&&eD((0,D.RG)(en)),et&&eT((0,D.RG)(et))},[W,ee,en,et]),(0,v.useEffect)(function(){return null!=p&&p.id&&x((0,w.ET)({id:p.id})),function(){x((0,Z.kS)())}},[null==p?void 0:p.id,x]),(0,v.useEffect)(function(){if(ea){var e,t,n;$("memberName",null==el?void 0:el.memberName),$("memberStatus",null==el?void 0:el.memberStatus),$("memberType",null==el?void 0:el.memberType),$("description",null==ed?void 0:ed.description),$("myopiaLeft",null==eo?void 0:eo.myopiaLeft),$("myopiaRight",null==eo?void 0:eo.myopiaRight),$("astiLeft",null==eo?void 0:eo.astiLeft),$("astiRight",null==eo?void 0:eo.astiRight),$("axisRight",null==eo?void 0:eo.axisRight),$("axisLeft",null==eo?void 0:eo.axisLeft),$("lensAddLeft",null==eo?void 0:eo.lensAddLeft),$("lensAddRight",null==eo?void 0:eo.lensAddRight),$("user_status",ea.user_status),ej({storeId:null==ed?void 0:null===(e=ed.memberStoreDto)||void 0===e?void 0:e.storeId,storeCode:null==ed?void 0:null===(t=ed.memberStoreDto)||void 0===t?void 0:t.storeCode,storeName:null==ed?void 0:null===(n=ed.memberStoreDto)||void 0===n?void 0:n.storeName})}},[ea,ed,el,eo,$]);var showPopup=function(e){var t,n=(t=(0,m.Z)(h().mark(function _callee(e){var t,n,r;return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return t={storeCode:Number(e.store_code)},l.prev=1,l.next=4,(0,T.kM)(a.query.id,t);case 4:(n=l.sent)&&n.data&&ej({storeId:(r=n.data.tempStoreChange).storeId,storeCode:r.storeCode,storeName:r.storeName}),l.next=11;break;case 8:l.prev=8,l.t0=l.catch(1),console.log(l.t0);case 11:case"end":return l.stop()}},_callee,null,[[1,8]])})),function(e){return t.apply(this,arguments)});x((0,g.Xf)({isModalOpen:!0,content:(0,j.tZ)(I.T1,{handleUpdate:n}),title:e,buttonsConfig:[]}))},updateConfirmHandler=function(e){f.Z.confirm({title:"",icon:(0,j.tZ)(_.Z,{}),content:"회원 정보를 수정 하시겠습니까?",okText:"수정",cancelText:"취소",onOk:function(){return updateHandler(e)}})},updateHandler=function(e){var t=e.astiLeft,n=e.astiRight,r=e.axisLeft,l=e.axisRight,i=e.description,o=e.lensAddLeft,d=e.lensAddRight,c=e.memberName,s=e.memberStatus,u={memberName:c,memberType:e.memberType,memberStatus:s,description:i,myopiaLeft:e.myopiaLeft,myopiaRight:e.myopiaRight,astiLeft:t,astiRight:n,axisLeft:r,axisRight:l,lensAddLeft:o,lensAddRight:d,storeId:null==eC?void 0:eC.storeId};x((0,w.di)({id:null==p?void 0:p.id,sendObject:u,callback:a}))},withdrawMemberConfirmHandler=function(e){f.Z.confirm({title:"회원 탈퇴",icon:(0,j.tZ)(_.Z,{}),content:"탈퇴 하시겠습니까?",okText:"탈퇴",cancelText:"취소",onOk:function(){return withdrawMemberHandler(e)}})},withdrawMemberHandler=function(e){x((0,L.c$)({sendObject:{id:e,callback:a}}))},smoothScrollTo=function(e){var t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"start"})},handleScroll=function(){if(eu.current){var e=eu.current.offsetTop;(window.scrollY||document.documentElement.scrollTop)>=e?ep(!0):ep(!1)}};return(0,v.useEffect)(function(){return window.addEventListener("scroll",handleScroll),function(){window.removeEventListener("scroll",handleScroll)}},[]),(0,j.BX)(j.HY,{children:[(0,j.tZ)("div",{css:i.Y2,children:(0,j.tZ)(S.Z,{title:"\uD83D\uDC49\uD83C\uDFFC 바슈롬 회원 상세 페이지입니다. 회원에 대한 상세 이력 확인 및 기본 정보 수정이 가능합니다."})}),(0,j.tZ)(l.n,{border:!1}),(0,j.BX)(l.l0,{onSubmit:G(function(e){return updateConfirmHandler(e)},function(e){return handleError(e)}),children:[(0,j.BX)("div",{ref:eu,children:[(0,j.tZ)(u.default,{css:q,type:"line",centered:!0,size:"middle",items:tabMenuList().map(function(e){return{label:(0,j.tZ)("a",{onClick:function(t){t.preventDefault(),smoothScrollTo(e.key)},children:e.label}),key:e.key}})}),(0,j.tZ)("div",{css:U,style:em?{position:"fixed",display:"flex",bottom:100,right:24}:{},children:tabMenuList().map(function(e){return(0,j.tZ)("a",{className:"scrollTab",href:"#".concat(e.key),children:e.label},e.key)})})]}),(0,j.BX)(l._L,{children:[(0,j.tZ)("div",{id:"basicInfo",children:(0,j.BX)(d.default,{title:"기본 정보",labelStyle:{width:"250px"},bordered:!0,column:3,children:[(0,j.tZ)(d.default.Item,{span:1,label:"이름",children:(0,j.tZ)(y.Qr,{name:"memberName",control:F,render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,s.Z)(t,R);return e.fieldState,(0,j.tZ)(l.kq,_objectSpread({value:n,type:"text",placeholder:"입력해주세요."},r))},rules:{required:!0}})}),(0,j.tZ)(d.default.Item,{span:2,label:"회원 ID",children:null==el?void 0:el.loginId}),(0,j.tZ)(d.default.Item,{span:1,label:"이메일",children:null==el?void 0:el.email}),(0,j.tZ)(d.default.Item,{span:2,label:"휴대폰 번호",children:null==el?void 0:el.memberPhone}),(0,j.tZ)(d.default.Item,{span:1,label:"회원 구분",children:(0,j.tZ)(y.Qr,{name:"memberType",control:F,render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,s.Z)(t,A);return e.fieldState,(0,j.tZ)(l.Tr,_objectSpread({options:eb,value:n},r))},rules:{required:!0}})}),(0,j.tZ)(d.default.Item,{span:2,label:"회원 상태",children:(0,j.tZ)(y.Qr,{name:"memberStatus",control:F,render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,s.Z)(t,O);return e.fieldState,(0,j.tZ)(l.Tr,_objectSpread({options:Y.AM,value:n},r))},rules:{required:!0}})}),(0,j.tZ)(d.default.Item,{span:1,label:"가입일",children:k()(null==el?void 0:el.regDate).format("YYYY-MM-DD")}),(0,j.tZ)(d.default.Item,{span:2,label:"정보 변경일",children:k()(null==el?void 0:el.modifiedDate).format("YYYY-MM-DD")}),(0,j.tZ)(d.default.Item,{span:1,label:"기기 정보(OS)",children:null==el?void 0:el.deviceOs}),(0,j.tZ)(d.default.Item,{span:2,label:"마지막 로그인",children:k()(null==el?void 0:el.lastLoginDate).format("YYYY-MM-DD")}),(0,j.tZ)(d.default.Item,{span:3,label:"상세주소",children:null==el?void 0:el.memberAddress})]})}),(0,j.tZ)(l.n,{border:!1}),(0,j.tZ)("div",{id:"marketingInfo",children:(0,j.BX)(d.default,{title:"마케팅 정보",labelStyle:{width:"250px"},bordered:!0,column:3,children:[(0,j.tZ)(d.default.Item,{span:2,label:"생년월일",children:k()(null==ei?void 0:ei.birthDate).format("YYYY-MM-DD")}),(0,j.tZ)(d.default.Item,{span:1,label:"성별",children:null==ei?void 0:ei.gender}),(0,j.tZ)(d.default.Item,{span:3,label:"SNS 연동",children:null==ei?void 0:ei.snsLoginStatus}),(0,j.tZ)(d.default.Item,{span:3,label:"정보동의",children:(null==ei?void 0:null===(e=ei.memberConsent)||void 0===e?void 0:e.join(", "))||"없음"})]})}),(0,j.tZ)(l.n,{border:!1}),(0,j.tZ)("div",{id:"purchaseInfo",children:(0,j.BX)(d.default,{title:"회원 도수 정보",labelStyle:{width:"250px"},bordered:!0,column:3,children:[(0,j.tZ)(d.default.Item,{span:3,label:"좌",children:(0,j.BX)(l.sw,{gutter:20,children:[(0,j.tZ)(l.z2,{span:1.1,css:i.A8,children:"근시:"}),(0,j.tZ)(l.z2,{span:3,children:(0,j.tZ)(y.Qr,{name:"myopiaLeft",control:F,render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,s.Z)(t,N);return e.fieldState,(0,j.tZ)(o.default,_objectSpread({style:{width:"100%"},value:n,options:ey},r))}})}),(0,j.tZ)(l.z2,{span:1.1,css:i.A8,children:"난시:"}),(0,j.tZ)(l.z2,{span:3,children:(0,j.tZ)(y.Qr,{name:"astiLeft",control:F,render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,s.Z)(t,E);return e.fieldState,(0,j.tZ)(o.default,_objectSpread({style:{width:"100%"},value:n,options:ew},r))}})}),(0,j.tZ)(l.z2,{span:1.1,css:i.A8,children:"ADD:"}),(0,j.tZ)(l.z2,{span:3,children:(0,j.tZ)(y.Qr,{name:"lensAddLeft",control:F,render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,s.Z)(t,z);return e.fieldState,(0,j.tZ)(o.default,_objectSpread({style:{width:"100%"},value:n,options:eL},r))}})}),(0,j.tZ)(l.z2,{span:1.1,css:i.A8,children:"축:"}),(0,j.tZ)(l.z2,{span:3,children:(0,j.tZ)(y.Qr,{name:"axisLeft",control:F,defaultValue:"",render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,s.Z)(t,M);return e.fieldState,(0,j.tZ)(o.default,_objectSpread({style:{width:"100%"},value:n,options:ek},r))}})})]})}),(0,j.tZ)(d.default.Item,{span:3,label:"우",children:(0,j.BX)(l.sw,{gutter:20,children:[(0,j.tZ)(l.z2,{span:1.1,css:i.A8,children:"근시:"}),(0,j.tZ)(l.z2,{span:3,children:(0,j.tZ)(y.Qr,{name:"myopiaRight",control:F,render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,s.Z)(t,X);return e.fieldState,(0,j.tZ)(o.default,_objectSpread({style:{width:"100%"},value:n,options:ey},r))}})}),(0,j.tZ)(l.z2,{span:1.1,css:i.A8,children:"난시:"}),(0,j.tZ)(l.z2,{span:3,children:(0,j.tZ)(y.Qr,{name:"astiRight",control:F,defaultValue:"",render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,s.Z)(t,B);return e.fieldState,(0,j.tZ)(o.default,_objectSpread({style:{width:"100%"},value:n,options:ew},r))}})}),(0,j.tZ)(l.z2,{span:1.1,css:i.A8,children:"ADD:"}),(0,j.tZ)(l.z2,{span:3,children:(0,j.tZ)(y.Qr,{name:"lensAddRight",control:F,defaultValue:"",render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,s.Z)(t,P);return e.fieldState,(0,j.tZ)(o.default,_objectSpread({style:{width:"100%"},value:n,options:eL},r))}})}),(0,j.tZ)(l.z2,{span:1.1,css:i.A8,children:"축:"}),(0,j.tZ)(l.z2,{span:3,children:(0,j.tZ)(y.Qr,{name:"axisRight",control:F,defaultValue:"",render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,s.Z)(t,H);return e.fieldState,(0,j.tZ)(o.default,_objectSpread({style:{width:"100%"},value:n,options:ek},r))}})})]})})]})}),(0,j.tZ)(l.n,{border:!1}),(0,j.tZ)("div",{id:"additionalInfo",children:(0,j.BX)(d.default,{id:"additionalInfo",title:"부가 정보",labelStyle:{width:"250px"},bordered:!0,column:3,children:[(0,j.tZ)(d.default.Item,{span:3,label:"Description",children:(0,j.tZ)(y.Qr,{name:"description",control:F,defaultValue:"",render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,s.Z)(t,Q);return e.fieldState,(0,j.tZ)(l.FF,_objectSpread({value:n||null,placeholder:"회원에 대한 설명을 작성해주세요."},r))}})}),(0,j.tZ)(d.default.Item,{span:3,label:"마이스토어",children:(0,j.BX)(l.sw,{children:[(0,j.BX)(l.z2,{css:K,span:18,children:[null==eC?void 0:eC.storeCode," | ",null==eC?void 0:eC.storeName]}),(0,j.BX)(l.z2,{span:6,css:i.Bd,children:[(0,j.tZ)(l.EK,{type:"primary",htmlType:"button",name:"스토어 변경",onClick:function(){return showPopup("스토어 변경")}}),(0,j.tZ)(l.GI,{title:"스토어 변경"})]})]})})]})})]}),(0,j.tZ)(l.n,{border:!1}),(0,j.BX)(l._L,{id:"myPointStoreChangeHistory",children:[(0,j.tZ)(d.default,{title:"마이 스토어 변경 이력"}),(0,j.tZ)(l.wY,{scroll:{y:300},detail:!1,columns:t,listData:es,rowKey:"modifiedDate"})]}),(0,j.tZ)(l.n,{border:!1}),(0,j.BX)(l._L,{id:"productPurchaseHistory",children:[(0,j.tZ)(d.default,{title:"구매 이력"}),(0,j.tZ)(l.wY,{scroll:{y:300},rowKey:"transactionCode",columns:n,listData:ec,detail:!1})]}),(0,j.tZ)(l.n,{border:!1}),(0,j.tZ)(l._L,{children:(0,j.tZ)(l.sw,{children:(0,j.BX)(l.z2,{span:24,css:i.eg,children:[(0,j.BX)("div",{children:[(0,j.tZ)(l.EK,{type:"default",name:"이전",htmlType:"button",css:(0,i.g4)(5),onClick:function(){return a.push("/admin/member")}}),(0,j.tZ)(l.EK,{type:"danger",name:"회원탈퇴",htmlType:"button",css:(0,i.g4)(5),onClick:function(){return withdrawMemberConfirmHandler(a.query.id)}})]}),(0,j.tZ)("div",{children:(0,j.tZ)(l.EK,{type:"primary",name:"수정하기",htmlType:"submit",css:(0,i.Lh)(5)})})]})})})]})]})};AdminUserDetailTemplate.getLayout=function(e){return(0,j.tZ)(a.L,{children:e})};var K={name:"s5xdrg",styles:"display:flex;align-items:center"},q={name:"1sl0atl",styles:"padding-top:30px;.ant-tabs-tab a{color:black;}.ant-tabs-tab:hover a{color:#04848c;}.ant-tabs-tab-active .ant-tabs-tab-btn a{color:#04848c;}"},U={name:"5rjchy",styles:"display:none;z-index:1000;box-shadow:0 2px 4px rgba(0, 0, 0, 0.3);border:1px solid rgba(0, 0, 0, 0.1);flex-direction:column;max-width:22px;overflow:hidden;transition:all 0.4s;white-space:nowrap;&:hover{max-width:200px;}counter-reset:tab-index;.scrollTab{background:#fff;color:#000;padding:8px;border-bottom:1px solid rgba(0, 0, 0, 0.1);transition:all 0.4s;font-size:12px;counter-increment:tab-index;}.scrollTab::before{content:counter(tab-index);margin-right:5px;}.scrollTab:hover{background:#f4f2f6;}"},UserDetail=function(){return(0,j.tZ)(j.HY,{children:(0,j.tZ)(AdminUserDetailTemplate,{})})};UserDetail.getLayout=function(e){return(0,j.tZ)(a.L,{children:e})};var V=UserDetail},60501:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/member/[id]",function(){return n(82068)}])}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=60501)}),_N_E=e.O()}]);