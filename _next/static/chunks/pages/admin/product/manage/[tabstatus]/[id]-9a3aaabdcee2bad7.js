(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6342],{58232:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ec}});var n=r(24295),l=r(60099);r(70643);var a=r(68469);r(1131);var o=r(28465);r(59567);var u=r(8799);r(45673);var d=r(8448),i=r(4730),c=r(27812),s=r(59499),p=r(50029);r(53294);var f=r(56697),m=r(87794),v=r.n(m),h=r(17621),Z=r(87536),b=r(28844),S=r(67294),y=r(9473),P=r(11163);r(71878);var g=r(64400),I=r(95966),D=r(86752),k=r(11475),w=r(23430),L=r(88484),M=r(77809),T=r(27890),E=r(47255),_=r(28245),N=r(94386),j=["ref","value"],G=["ref","value"],C=["ref","value"],B=["ref","value"],O=["ref","value"],x=["ref","value"],A=["ref","value"],K=["ref","value"],Q=["ref","value"],U=["ref","value"],q=["ref","value"],V=["ref","value"],X=["ref","value"],Y=["ref","value"],H=["ref","value"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ProductManageSalesDetailTemplate(){var e,t,r=(0,y.I0)(),n=(0,P.useRouter)(),m=(0,g.Z)(["lensCycle","lensPowerType","storeGroup","productGroupBausch"]),z=m.lensCycle,R=m.lensPowerType,F=m.storeGroup,W=m.productGroupBausch,J=(0,y.v9)(function(e){return e.product.productDetail}),$=(0,S.useState)([]),ee=$[0],et=$[1],er=(0,S.useRef)(!1),en=(0,S.useState)([]),el=en[0],ea=en[1],eo=(0,S.useState)([]),eu=eo[0],ed=eo[1],ei=(0,S.useState)([]),ec=ei[0],es=ei[1],ep=(0,S.useState)([]),ef=ep[0],em=ep[1],ev=(0,Z.cI)({defaultValues:{productPointPriceGroupModels:[{storeGroupId:[],pointPrice:""}]}}),eh=(ev.register,ev.handleSubmit),eZ=ev.control,eb=ev.setValue,eS=ev.getValues,ey=(ev.formState.errors,ev.watch);ev.reset;var eP=(0,Z.Dq)({control:eZ,name:"productPointPriceGroupModels",keyName:"fieldId"}),eg=eP.fields,eI=eP.append,eD=eP.remove,skuHandler=function(e){er.current=!0;var t=new FormData;t.append("skuInfo",e.file),r((0,T.pO)({formData:t}))},setProductDetailData=function(){if(J&&ec.length>0){var e=J.channelType,t=J.finalPrice,r=J.lensCycle,n=J.lensPowerType,l=J.minStock,a=J.pointOrderable,o=J.productDescription,u=J.productGroupId,d=J.productId,i=J.productName,c=J.productNameEn,s=J.productQuantity,p=J.recommendPrice,f=J.salesStatus,m=J.skuInfoModels,v=J.productPointPriceGroupModels;if(eb("channelType",e),eb("finalPrice",t),eb("lensCycle",r),eb("lensPowerType",n),eb("minStock",l),eb("pointOrderable",a),eb("productDescription",o),eb("productId",d),eb("productName",i),eb("productNameEn",c),eb("productQuantity",s),eb("recommendPrice",p),eb("salesStatus",f),eb("skuInfoModels",m),void 0!==v){var h=v.map(function(e){return{pointPrice:e.pointPrice,storeGroupId:e.storeGroupId.map(function(e){var t=ec.find(function(t){return t.value===e});return[null!=t&&t.label?t.value:""]})}});if(void 0!==ee){var Z=ee.find(function(e){return e.value===String(u)});eb("productGroupId",null==Z?void 0:Z.label)}eb("productPointPriceGroupModels",h)}}};(0,S.useEffect)(function(){!er.current&&null!=J&&J.channelType&&setProductDetailData()},[J,ee,ec]);var addConfirm=function(e){f.Z.confirm({title:"제품 상세 수정",icon:(0,N.tZ)(k.Z,{}),content:"수정하시겠습니까?",okText:"수정",cancelText:"취소",onOk:function(){return handleSendData(e)}})},ek={onRemove:function(e){ed([]),r((0,T.cv)({skuInfoModels:[]}))},beforeUpload:function(e){return!1},onChange:(e=(0,p.Z)(v().mark(function _callee(e){var t;return v().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:(t=e.fileList).filter(function(e){return"removed"!==e.status}).length>0&&skuHandler(e),ed(t);case 4:case"end":return r.stop()}},_callee)})),function(t){return e.apply(this,arguments)}),fileList:eu},handleSendData=function(e){var t,l,a,o=e.channelType,u=e.productGroupId,d=e.productName,i=e.productNameEn,c=e.productQuantity,p=e.lensPowerType,f=e.salesStatus,m=e.recommendPrice,v=e.finalPrice,h=e.productDescription,Z=e.pointOrderable,b=e.minStock;e.skuInfoModels;var S=ee.find(function(e){return e.label===u}).value,y=null==z?void 0:null===(t=z.find(function(t){return t.value===e.lensCycle}))||void 0===t?void 0:t.key,P=Number(c),g=m?Number(m):null,D=v?Number(v):null,k=b?Number(b):null,w=eS().productPointPriceGroupModels.map(function(e){var t=e.storeGroupId.map(function(e){if(Array.isArray(e)){var t=ec.find(function(t){return t.label===e[0]||t.value===e[0]});return t?[String(t.label)]:e}var r=ec.find(function(t){return t.label===e||t.value===e[0]});return r?[String(r.label)]:[e]});return _objectSpread(_objectSpread({},e),{},{storeGroupId:t})}).map(function(e){var t,r=""===e.storeGroupId?null:Array.isArray(e.storeGroupId)?e.storeGroupId.map(function(e){var t=ec.find(function(t){return t.label===e[0]});return Number(null==t?void 0:t.value)}):[Number(null==(t=ec.find(function(t){return t.label===e.storeGroupId.label}))?void 0:t.value)];return{pointPrice:Number(e.pointPrice)?Number(e.pointPrice):null,storeGroupId:r}}),L={productBauschReqDto:(l={channelType:o,productGroupId:Number(S),productName:d,productNameEn:i,productQuantity:P,lensPowerType:p,lensCycle:y,salesStatus:f,recommendPrice:g,finalPrice:D,productDescription:""===h?null:h},(0,s.Z)(l,"productDescription",h),(0,s.Z)(l,"pointOrderable",Z),(0,s.Z)(l,"minStock",k),(0,s.Z)(l,"productPointPriceGroupModels",w),l),skuInfoModels:J.skuInfoModels},M=null===(a=n.query)||void 0===a?void 0:a.id;0===J.skuInfoModels.length?r((0,I.lh)({message:"SKU 등록이 필요합니다"})):w.some(function(e){return 0===e.storeGroupId.length})?r((0,I.lh)({message:"스토어 그룹을 선택해주세요."})):r((0,T.qg)({id:M,sendObject:L,callback:n}))},handleError=function(e){null!=e&&e.productGroupId&&r((0,I.lh)({message:"제품 등록 실패",description:"제품 그룹을 입력 해 주세요."})),null!=e&&e.productName&&r((0,I.lh)({message:"제품 등록 실패",description:"제품명을 입력 해 주세요."})),null!=e&&e.productNameEn&&r((0,I.lh)({message:"제품 등록 실패",description:"제품명(영문)을 입력해 주세요."})),null!=e&&e.terms_essential_status&&r((0,I.lh)({message:"제품 등록 실패",description:"제품 개입을 입력 해주세요."})),null!=e&&e.productPointPriceGroupModels&&r((0,I.lh)({message:"제품 등록 실패",description:"적립제품 구매가 설정을 입력 해주세요."})),null!=e&&e.lensCycle&&r((0,I.lh)({message:"제품 등록 실패",description:"사용주기를 입력 해주세요."})),null!=e&&e.minStock&&r((0,I.lh)({message:"제품 등록 실패",description:"최소 재고수량을 입력 해주세요."})),null!=e&&e.skuInfoModels&&r((0,I.lh)({message:"제품 등록 실패",description:"SKU 파일 업로드는 필수입니다."}))},addPurchaseSetting=function(){eI({storeGroupId:"",pointPrice:""})},removePurchaseSetting=function(e){(null==eg?void 0:eg.length)>=2&&eD(e)},ew=ey("pointOrderable");return(0,S.useEffect)(function(){var e;null!=n&&null!==(e=n.query)&&void 0!==e&&e.id&&r((0,T.x4)({id:n.query.id,callback:n}))},[r,n,n.query.id]),(0,S.useEffect)(function(){R&&R.length>0&&ea((0,D.dC)(R)),F&&F.length>0&&es((0,D.dC)(F)),W&&W.length>0&&et((0,D.dC)(W))},[R,W,F]),(0,S.useEffect)(function(){(null==J?void 0:J.skuInfoModels.length)>0&&0===ef.length&&em([{number:"No",sku:"SKU",productBarcode:"Barcode",myopia:"Myopia",asti:"Asti",axis:"Axis",lensAdd:"ADD",bc:"BC",wareHouseCode:"WarehouseCode",ref2:"REF#2"}].concat((0,c.Z)(null==J?void 0:J.skuInfoModels)))},[J]),(0,N.BX)(N.HY,{children:[(0,N.tZ)("div",{css:l.Y2,children:(0,N.tZ)(E.Z,{title:"\uD83D\uDC49\uD83C\uDFFC 바슈롬의 판매 제품상세 페이지입니다. 바슈롬 제품을 확인 및 수정할 수 있습니다."})}),(0,N.tZ)(h.n,{border:!1}),(0,N.BX)(b.Z,{onSubmit:eh(function(e){return addConfirm(e)},function(e){return handleError(e)}),children:[(0,N.BX)(h._L,{bordered:!1,children:[(0,N.BX)(d.default,{title:"제품 정보",labelStyle:{width:"250px"},bordered:!0,column:4,children:[(0,N.tZ)(d.default.Item,{span:2,label:"채널⭐️",children:(0,N.tZ)(Z.Qr,{name:"channelType",control:eZ,disabled:!0,defaultValue:"BAUSCH",render:function(e){var t=e.field,r=(t.ref,t.value,(0,i.Z)(t,j));return e.fieldState,(0,N.tZ)(h.Tr,_objectSpread({options:[{label:"BAUSCH",value:"BAUSCH"},{label:"LENSLY",value:"LENSLY"}],value:"BAUSCH"},r))},rules:{required:!0}})}),(0,N.tZ)(d.default.Item,{span:2,label:"제품 그룹⭐️",children:(0,N.tZ)(Z.Qr,{name:"productGroupId",control:eZ,defaultValue:"",rules:{required:!0},render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,G);return e.fieldState,(0,N.tZ)(h.jL,_objectSpread({value:r||[],options:W,placeholder:"선택해주세요"},n))}})}),(0,N.tZ)(d.default.Item,{span:2,label:"제품명⭐️",children:(0,N.tZ)(Z.Qr,{name:"productName",control:eZ,render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,C);return e.fieldState,(0,N.tZ)(h.kq,_objectSpread({type:"text",value:r||"",placeholder:"제품명을 입력해주세요."},n))},rules:{required:!0}})}),(0,N.tZ)(d.default.Item,{span:2,label:"제품명(영문)⭐️",children:(0,N.tZ)(Z.Qr,{name:"productNameEn",control:eZ,defaultValue:"",render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,B);return e.fieldState,(0,N.tZ)(h.kq,_objectSpread({type:"text",value:r||"",placeholder:"제품명(영문)을 입력해주세요."},n))},rules:{required:!0}})}),(0,N.tZ)(d.default.Item,{span:2,label:"개입⭐️",children:(0,N.tZ)(Z.Qr,{name:"productQuantity",control:eZ,render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,O);return e.fieldState,(0,N.tZ)(u.Z,_objectSpread({placeholder:"개입을 입력해주세요.",min:0,style:{width:"100%"},value:r},n))},rules:{required:!0}})}),(0,N.tZ)(d.default.Item,{span:2,label:"도수⭐️",children:(0,N.tZ)(Z.Qr,{name:"lensPowerType",control:eZ,defaultValue:"",render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,x);return e.fieldState,(0,N.tZ)(h.Tr,_objectSpread({options:el,value:r},n))},rules:{required:!0}})}),(0,N.tZ)(d.default.Item,{span:2,label:"사용주기⭐️",children:(0,N.tZ)(Z.Qr,{name:"lensCycle",control:eZ,defaultValue:"",render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,A);return e.fieldState,(0,N.tZ)(h.jL,_objectSpread({value:r||null,options:z,placeholder:"사용주기를 선택해주세요"},n))},rules:{required:!0}})}),(0,N.tZ)(d.default.Item,{span:2,label:"단종⭐️",children:(0,N.tZ)(Z.Qr,{name:"salesStatus",control:eZ,defaultValue:"",render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,K);return e.fieldState,(0,N.tZ)(h.Tr,_objectSpread({options:[{label:"단종",value:"DISCONTINUE"},{label:"판매중",value:"ACTIVE"}],value:r},n))},rules:{required:!0}})}),(0,N.tZ)(d.default.Item,{span:2,label:"권장 소비자가",children:(0,N.tZ)(Z.Qr,{name:"recommendPrice",control:eZ,render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,Q);return e.fieldState,(0,N.tZ)(u.Z,_objectSpread({placeholder:"권장 소비자가를 입력해주세요",min:0,style:{width:"100%"},value:r},n))}})}),(0,N.tZ)(d.default.Item,{span:2,label:"최종판매가",children:(0,N.tZ)(Z.Qr,{name:"finalPrice",control:eZ,render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,U);return e.fieldState,(0,N.tZ)(u.Z,_objectSpread({placeholder:"최종 판매가를 입력해주세요.",min:0,style:{width:"100%"},value:r},n))}})}),(0,N.tZ)(d.default.Item,{span:4,label:"제품설명",children:(0,N.tZ)(Z.Qr,{name:"productDescription",control:eZ,render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,q);return e.fieldState,(0,N.tZ)(h.FF,_objectSpread({defaultValue:"",value:r||"",placeholder:"제품 설명을 입력해주세요."},n))}})})]}),(0,N.tZ)(h.n,{border:!1}),(0,N.BX)(d.default,{title:"적립제품 설정⭐️",labelStyle:{width:"250px"},bordered:!0,column:4,children:[(0,N.tZ)(d.default.Item,{span:2,label:"주문 가능 여부",children:(0,N.tZ)(Z.Qr,{name:"pointOrderable",control:eZ,defaultValue:"BUY_ENABLED",render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,V);return e.fieldState,(0,N.tZ)(h.Tr,_objectSpread({options:[{label:"가능",value:"BUY_ENABLED"},{label:"불가",value:"BUY_DISABLED"}],value:r},n))},rules:{required:!0}})}),"BUY_ENABLED"===ew&&(0,N.tZ)(d.default.Item,{span:2,label:"최소 재고 수량⭐️",children:(0,N.tZ)(Z.Qr,{name:"minStock",control:eZ,render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,X);return e.fieldState,(0,N.tZ)(u.Z,_objectSpread({placeholder:"주문 가능한 최소 재고 수량을 입력해 주세요",min:0,style:{width:"100%"},value:r},n))},rules:{required:!0}})})]}),(0,N.tZ)(h.n,{border:!1}),(0,N.tZ)(d.default,{column:1,title:"적립제품 구매가 설정⭐️",children:null==eg?void 0:eg.map(function(e,t){return(0,N.BX)(h.sw,{children:[(0,N.tZ)(h.z2,{span:11,children:(0,N.tZ)(Z.Qr,{name:"productPointPriceGroupModels[".concat(t,"].storeGroupId"),control:eZ,render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,Y);return e.fieldState,(0,N.tZ)(M.Z,_objectSpread({type:"text",style:{width:"100%"},placeholder:"스토어 그룹을 선택해주세요",value:r,options:ec},n))}})}),(0,N.tZ)(h.z2,{span:6,children:(0,N.tZ)(Z.Qr,{name:"productPointPriceGroupModels[".concat(t,"].pointPrice"),control:eZ,render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,H);return e.fieldState,(0,N.tZ)(u.Z,_objectSpread({placeholder:"구매가를 입력하세요",min:0,style:{width:"100%"},css:(0,l.Lh)(20),value:r},n))}})}),(0,N.BX)(h.z2,{span:3,css:l.Ax,children:[0===t&&(0,N.tZ)(h.EK,{type:"primary",name:"+",onClick:function(){return addPurchaseSetting(t)},css:(0,l.Lh)(5)}),0!==t&&(0,N.tZ)(h.EK,{type:"danger",name:"x",onClick:function(){return removePurchaseSetting(t)},css:(0,l.Lh)(5)})]})]},e.fieldId)})}),(0,N.tZ)(h.n,{border:!1}),(0,N.tZ)(d.default,{title:(0,N.BX)(N.HY,{children:["SKU 등록⭐️",(0,N.tZ)("span",{style:{fontSize:"14px",color:"#888",marginLeft:"10px",fontWeight:"400"},children:"현재 등록된 SKU를 다운로드하거나 새 파일을 업로드하세요."})]}),labelStyle:{width:"250px"},bordered:!0,extra:(0,N.tZ)(h.EK,{type:"solid",name:"샘플 다운로드",icon:(0,N.tZ)(w.Z,{}),htmlType:"button",onClick:D.gp}),children:(0,N.tZ)(d.default.Item,{span:3,label:"SKU",children:(0,N.BX)("div",{style:{display:"flex",gap:"10px"},children:[eS().skuInfoModels&&(0,N.tZ)("span",{children:(0,N.tZ)(h.EK,{type:"dashed",name:"기존 SKU 파일 다운로드",icon:(0,N.tZ)(w.Z,{}),onClick:function(){var e=null==ef?void 0:ef.map(function(e){return{No:e.number,SKU:e.sku,바코드:e.productBarcode,근시:e.myopia,난시:e.asti,축:e.axis,ADD:e.lensAdd,BC:e.bc,창고:e.wareHouseCode,"REF#2":e.ref2}});(0,D.r8)(e)}})}),(0,N.tZ)(o.Z,_objectSpread(_objectSpread({accept:".xlsx",maxCount:1},ek),{},{children:(0,N.tZ)(h.EK,{type:"danger",name:"새 SKU 파일 업로드",icon:(0,N.tZ)(L.Z,{})})}))]})})})]}),(0,N.tZ)(h.n,{border:!1}),(0,N.tZ)(a.Z,{defaultActiveKey:["preview"],children:(0,N.tZ)(a.Z.Panel,{header:"SKU 보기",children:(null==J?void 0:null===(t=J.skuInfoModels)||void 0===t?void 0:t.length)!==0&&(0,N.tZ)(_.Z,{skuList:null==J?void 0:J.skuInfoModels})},"preview")}),(0,N.tZ)(h.n,{border:!1}),(0,N.tZ)(h._L,{size:"default",bordered:!1,children:(0,N.BX)(h.sw,{children:[(0,N.tZ)(h.z2,{span:23,css:l.Nb,children:(0,N.tZ)(h.EK,{type:"default",name:"이전",htmlType:"button",css:(0,l.g4)(20),onClick:function(){return n.push("/admin/product/manage")}})}),(0,N.tZ)(h.z2,{span:1,css:l.Ax,children:(0,N.tZ)(h.EK,{type:"primary",name:"수정하기",htmlType:"submit",css:(0,l.Lh)(5)})})]})})]})]})}var z=r(18179),R=["ref","value"],F=["ref","value"],W=["ref","value"],J=["ref","value"],$=["ref","value"],ee=["ref","value"],et=["ref","value"],er=["ref","value"],en=["ref","value"],el=["ref","value"],ea=["ref","value"],eo=["ref","value"],eu=["ref","value"],ed=["ref","value"],ei=["ref","value"];function ProductManageSalesLenslyDetailTemplate_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ProductManageSalesLenslyDetailTemplate_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ProductManageSalesLenslyDetailTemplate_ownKeys(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ProductManageSalesLenslyDetailTemplate_ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ProductManageSalesLenslyDetailTemplate(){var e,t,r=(0,y.I0)(),n=(0,P.useRouter)(),m=(0,g.Z)(["productGroupLensly","lensCycle","lensPowerType","storeGroup"]),T=m.productGroupLensly,j=m.lensCycle,G=m.lensPowerType,C=m.storeGroup,B=(0,y.v9)(function(e){return e.productLensly.productDetail}),O=(0,S.useState)([]),x=O[0],A=O[1],K=(0,S.useRef)(!1),Q=(0,S.useState)([]),U=Q[0],q=Q[1],V=(0,S.useState)(null),X=V[0],Y=V[1],H=(0,S.useState)([]),ec=H[0],es=H[1],ep=(0,S.useState)([]),ef=ep[0],em=ep[1],ev=(0,Z.cI)({defaultValues:{productPointPriceGroupModels:[{storeGroupId:[],pointPrice:""}]}}),eh=(ev.register,ev.handleSubmit),eZ=ev.control,eb=ev.setValue,eS=ev.getValues,ey=(ev.formState.errors,ev.watch),eP=(0,Z.Dq)({control:eZ,name:"productPointPriceGroupModels",keyName:"fieldId"}),eg=eP.fields,eI=eP.append,eD=eP.remove,skuHandler=function(e){K.current=!0;var t=new FormData;t.append("skuInfo",e.file),r((0,z.RA)({formData:t}))},setProductDetailData=function(){if(B&&ec.length>0){var e=B.channelType,t=B.finalPrice,r=B.lensCycle,n=B.lensPowerType,l=B.minStock,a=B.pointOrderable,o=B.productDescription,u=B.productGroupId,d=B.productId,i=B.productName,c=B.productNameEn,s=B.productQuantity,p=B.recommendPrice,f=B.salesStatus,m=B.skuInfoModels,v=B.productPointPriceGroupModels;if(eb("channelType",e),eb("finalPrice",t),eb("lensCycle",r),eb("lensPowerType",n),eb("minStock",l),eb("pointOrderable",a),eb("productDescription",o),eb("productId",d),eb("productName",i),eb("productNameEn",c),eb("productQuantity",s),eb("recommendPrice",p),eb("salesStatus",f),eb("skuInfoModels",m),void 0!==v){var h=v.map(function(e){return{pointPrice:e.pointPrice,storeGroupId:e.storeGroupId.map(function(e){var t=ec.find(function(t){return t.value===e});return[null!=t&&t.label?t.value:""]})}});if(void 0!==x){var Z=x.find(function(e){return e.value===String(u)});eb("productGroupId",null==Z?void 0:Z.label)}eb("productPointPriceGroupModels",h)}}};(0,S.useEffect)(function(){K.current||setProductDetailData()},[B,x,eb,ec]);var addConfirm=function(e){f.Z.confirm({title:"제품 상세 수정",icon:(0,N.tZ)(k.Z,{}),content:"수정하시겠습니까?",okText:"수정",cancelText:"취소",onOk:function(){return handleSendData(e)}})},ek={onRemove:function(e){Y([]),r((0,z.BB)({skuInfoModels:[]}))},beforeUpload:function(e){return!1},onChange:(e=(0,p.Z)(v().mark(function _callee(e){var t;return v().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:(t=e.fileList).filter(function(e){return"removed"!==e.status}).length>0&&skuHandler(e),Y(t);case 4:case"end":return r.stop()}},_callee)})),function(t){return e.apply(this,arguments)}),fileList:X},handleSendData=function(e){var t,l,a,o=e.channelType,u=e.productGroupId,d=e.productName,i=e.productNameEn,c=e.productQuantity,p=e.lensPowerType,f=e.salesStatus,m=e.recommendPrice,v=e.finalPrice,h=e.productDescription,Z=e.pointOrderable,b=e.minStock;e.skuInfoModels;var S=x.find(function(e){return e.label===u}).value,y=null==j?void 0:null===(t=j.find(function(t){return t.value===e.lensCycle}))||void 0===t?void 0:t.key,P=Number(c),g=m?Number(m):null,D=v?Number(v):null,k=b?Number(b):null,w=eS().productPointPriceGroupModels.map(function(e){var t=e.storeGroupId.map(function(e){if(Array.isArray(e)){var t=ec.find(function(t){return t.label===e[0]||t.value===e[0]});return t?[String(t.label)]:e}var r=ec.find(function(t){return t.label===e||t.value===e[0]});return r?[String(r.label)]:[e]});return ProductManageSalesLenslyDetailTemplate_objectSpread(ProductManageSalesLenslyDetailTemplate_objectSpread({},e),{},{storeGroupId:t})}).map(function(e){var t,r=""===e.storeGroupId?null:Array.isArray(e.storeGroupId)?e.storeGroupId.map(function(e){var t=ec.find(function(t){return t.label===e[0]});return Number(null==t?void 0:t.value)}):[Number(null==(t=ec.find(function(t){return t.label===e.storeGroupId.label}))?void 0:t.value)];return{pointPrice:Number(e.pointPrice)?Number(e.pointPrice):null,storeGroupId:r}}),L={productLenslyReqDto:(l={channelType:o,productGroupId:Number(S),productName:d,productNameEn:i,productQuantity:P,lensPowerType:p,lensCycle:y,salesStatus:f,recommendPrice:g,finalPrice:D,productDescription:""===h?null:h},(0,s.Z)(l,"productDescription",h),(0,s.Z)(l,"pointOrderable",Z),(0,s.Z)(l,"minStock",k),(0,s.Z)(l,"productPointPriceGroupModels",w),l),skuInfoModels:B.skuInfoModels},M=null===(a=n.query)||void 0===a?void 0:a.id;0===B.skuInfoModels.length?r((0,I.lh)({message:"SKU 등록이 필요합니다"})):w.some(function(e){return 0===e.storeGroupId.length})?r((0,I.lh)({message:"스토어 그룹을 선택해주세요."})):r((0,z.UP)({id:M,sendObject:L,callback:n}))},handleError=function(e){null!=e&&e.productGroupId&&r((0,I.lh)({message:"제품 등록 실패",description:"제품 그룹을 입력 해 주세요."})),null!=e&&e.productName&&r((0,I.lh)({message:"제품 등록 실패",description:"제품명을 입력 해 주세요."})),null!=e&&e.productNameEn&&r((0,I.lh)({message:"제품 등록 실패",description:"제품명(영문)을 입력해 주세요."})),null!=e&&e.terms_essential_status&&r((0,I.lh)({message:"제품 등록 실패",description:"제품 개입을 입력 해주세요."})),null!=e&&e.productPointPriceGroupModels&&r((0,I.lh)({message:"제품 등록 실패",description:"적립제품 구매가 설정을 입력 해주세요."})),null!=e&&e.lensCycle&&r((0,I.lh)({message:"제품 등록 실패",description:"사용주기를 입력 해주세요."})),null!=e&&e.minStock&&r((0,I.lh)({message:"제품 등록 실패",description:"최소 재고수량을 입력 해주세요."})),null!=e&&e.skuInfoModels&&r((0,I.lh)({message:"제품 등록 실패",description:"SKU 파일 업로드는 필수입니다."}))},addPurchaseSetting=function(){eI({storeGroupId:"",pointPrice:""})},removePurchaseSetting=function(e){(null==eg?void 0:eg.length)>=2&&eD(e)},ew=ey("pointOrderable");return(0,S.useEffect)(function(){var e;null!=n&&null!==(e=n.query)&&void 0!==e&&e.id&&r((0,z.lI)({id:n.query.id,callback:n}))},[r,n,n.query.id]),(0,S.useEffect)(function(){G&&G.length>0&&q((0,D.dC)(G)),C&&C.length>0&&es((0,D.dC)(C)),T&&T.length>0&&A((0,D.dC)(T))},[G,T,C]),(0,S.useEffect)(function(){(null==B?void 0:B.skuInfoModels.length)>0&&0===ef.length&&em([{number:"No",sku:"SKU",productBarcode:"Barcode",myopia:"Myopia",asti:"Asti",axis:"Axis",lensAdd:"ADD",bc:"BC",wareHouseCode:"WarehouseCode",ref2:"REF#2"}].concat((0,c.Z)(null==B?void 0:B.skuInfoModels)))},[B]),(0,N.BX)(N.HY,{children:[(0,N.tZ)("div",{css:l.Y2,children:(0,N.tZ)(E.Z,{title:"\uD83D\uDC49\uD83C\uDFFC 렌즐리의 판매 제품상세 페이지입니다. 렌즐리 제품을 확인 및 수정할 수 있습니다."})}),(0,N.tZ)(h.n,{border:!1}),(0,N.BX)(b.Z,{onSubmit:eh(function(e){return addConfirm(e)},function(e){return handleError(e)}),children:[(0,N.BX)(h._L,{bordered:!1,children:[(0,N.BX)(d.default,{title:"제품 정보",labelStyle:{width:"250px"},bordered:!0,column:4,children:[(0,N.tZ)(d.default.Item,{span:2,label:"채널⭐️",children:(0,N.tZ)(Z.Qr,{name:"channelType",control:eZ,disabled:!0,defaultValue:"LENSLY",render:function(e){var t=e.field,r=(t.ref,t.value,(0,i.Z)(t,R));return e.fieldState,(0,N.tZ)(h.Tr,ProductManageSalesLenslyDetailTemplate_objectSpread({options:[{label:"BAUSCH",value:"BAUSCH"},{label:"LENSLY",value:"LENSLY"}],value:"LENSLY"},r))},rules:{required:!0}})}),(0,N.tZ)(d.default.Item,{span:2,label:"제품 그룹⭐️",children:(0,N.tZ)(Z.Qr,{name:"productGroupId",control:eZ,defaultValue:"",rules:{required:!0},render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,F);return e.fieldState,(0,N.tZ)(h.jL,ProductManageSalesLenslyDetailTemplate_objectSpread({value:r||[],options:T,placeholder:"선택해주세요"},n))}})}),(0,N.tZ)(d.default.Item,{span:2,label:"제품명⭐️",children:(0,N.tZ)(Z.Qr,{name:"productName",control:eZ,render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,W);return e.fieldState,(0,N.tZ)(h.kq,ProductManageSalesLenslyDetailTemplate_objectSpread({type:"text",value:r||"",placeholder:"제품명을 입력해주세요."},n))},rules:{required:!0}})}),(0,N.tZ)(d.default.Item,{span:2,label:"제품명(영문)⭐️",children:(0,N.tZ)(Z.Qr,{name:"productNameEn",control:eZ,defaultValue:"",render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,J);return e.fieldState,(0,N.tZ)(h.kq,ProductManageSalesLenslyDetailTemplate_objectSpread({type:"text",value:r||"",placeholder:"제품명(영문)을 입력해주세요."},n))},rules:{required:!0}})}),(0,N.tZ)(d.default.Item,{span:2,label:"개입⭐️",children:(0,N.tZ)(Z.Qr,{name:"productQuantity",control:eZ,render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,$);return e.fieldState,(0,N.tZ)(u.Z,ProductManageSalesLenslyDetailTemplate_objectSpread({placeholder:"개입을 입력해주세요.",min:0,style:{width:"100%"},value:r},n))},rules:{required:!0}})}),(0,N.tZ)(d.default.Item,{span:2,label:"도수⭐️",children:(0,N.tZ)(Z.Qr,{name:"lensPowerType",control:eZ,defaultValue:"",render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,ee);return e.fieldState,(0,N.tZ)(h.Tr,ProductManageSalesLenslyDetailTemplate_objectSpread({options:U,value:r},n))},rules:{required:!0}})}),(0,N.tZ)(d.default.Item,{span:2,label:"사용주기⭐️",children:(0,N.tZ)(Z.Qr,{name:"lensCycle",control:eZ,defaultValue:"",render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,et);return e.fieldState,(0,N.tZ)(h.jL,ProductManageSalesLenslyDetailTemplate_objectSpread({value:r||null,options:j,placeholder:"사용주기를 선택해주세요"},n))}})}),(0,N.tZ)(d.default.Item,{span:2,label:"단종⭐️",children:(0,N.tZ)(Z.Qr,{name:"salesStatus",control:eZ,defaultValue:"",render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,er);return e.fieldState,(0,N.tZ)(h.Tr,ProductManageSalesLenslyDetailTemplate_objectSpread({options:[{label:"단종",value:"DISCONTINUE"},{label:"판매중",value:"ACTIVE"}],value:r},n))},rules:{required:!0}})}),(0,N.tZ)(d.default.Item,{span:2,label:"권장 소비자가",children:(0,N.tZ)(Z.Qr,{name:"recommendPrice",control:eZ,defaultValue:"",render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,en);return e.fieldState,(0,N.tZ)(u.Z,ProductManageSalesLenslyDetailTemplate_objectSpread({placeholder:"권장 소비자가를 입력해주세요",min:0,style:{width:"100%"},value:r},n))}})}),(0,N.tZ)(d.default.Item,{span:2,label:"최종판매가",children:(0,N.tZ)(Z.Qr,{name:"finalPrice",control:eZ,defaultValue:"",render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,el);return e.fieldState,(0,N.tZ)(u.Z,ProductManageSalesLenslyDetailTemplate_objectSpread({placeholder:"최종 판매가를 입력해주세요.",min:0,style:{width:"100%"},value:r},n))}})}),(0,N.tZ)(d.default.Item,{span:4,label:"제품설명",children:(0,N.tZ)(Z.Qr,{name:"productDescription",control:eZ,defaultValue:"",render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,ea);return e.fieldState,(0,N.tZ)(h.FF,ProductManageSalesLenslyDetailTemplate_objectSpread({defaultValue:"",value:r||"",placeholder:"제품 설명을 입력해주세요."},n))}})})]}),(0,N.tZ)(h.n,{border:!1}),(0,N.BX)(d.default,{title:"적립제품 설정⭐️",labelStyle:{width:"250px"},bordered:!0,column:4,children:[(0,N.tZ)(d.default.Item,{span:2,label:"주문 가능 여부",children:(0,N.tZ)(Z.Qr,{name:"pointOrderable",control:eZ,defaultValue:"BUY_ENABLED",render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,eo);return e.fieldState,(0,N.tZ)(h.Tr,ProductManageSalesLenslyDetailTemplate_objectSpread({options:[{label:"가능",value:"BUY_ENABLED"},{label:"불가",value:"BUY_DISABLED"}],value:r},n))},rules:{required:!0}})}),"BUY_ENABLED"===ew&&(0,N.tZ)(d.default.Item,{span:2,label:"최소 재고 수량⭐️",children:(0,N.tZ)(Z.Qr,{name:"minStock",control:eZ,render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,eu);return e.fieldState,(0,N.tZ)(u.Z,ProductManageSalesLenslyDetailTemplate_objectSpread({placeholder:"주문 가능한 최소 재고 수량을 입력해 주세요",min:0,style:{width:"100%"},value:r},n))},rules:{required:!0}})})]}),(0,N.tZ)(h.n,{border:!1}),(0,N.tZ)(d.default,{column:1,title:"적립제품 구매가 설정⭐️",children:null==eg?void 0:eg.map(function(e,t){return(0,N.BX)(h.sw,{children:[(0,N.tZ)(h.z2,{span:11,children:(0,N.tZ)(Z.Qr,{name:"productPointPriceGroupModels[".concat(t,"].storeGroupId"),control:eZ,render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,ed);return e.fieldState,(0,N.tZ)(M.Z,ProductManageSalesLenslyDetailTemplate_objectSpread({type:"text",style:{width:"100%"},placeholder:"스토어 그룹을 선택해주세요",value:r,options:ec},n))}})}),(0,N.tZ)(h.z2,{span:6,children:(0,N.tZ)(Z.Qr,{name:"productPointPriceGroupModels[".concat(t,"].pointPrice"),control:eZ,render:function(e){var t=e.field,r=(t.ref,t.value),n=(0,i.Z)(t,ei);return e.fieldState,(0,N.tZ)(u.Z,ProductManageSalesLenslyDetailTemplate_objectSpread({placeholder:"구매가를 입력하세요",min:0,style:{width:"100%"},css:(0,l.Lh)(20),value:r},n))}})}),(0,N.BX)(h.z2,{span:3,css:l.Ax,children:[0===t&&(0,N.tZ)(h.EK,{type:"primary",name:"+",onClick:function(){return addPurchaseSetting(t)},css:(0,l.Lh)(5)}),0!==t&&(0,N.tZ)(h.EK,{type:"danger",name:"x",onClick:function(){return removePurchaseSetting(t)},css:(0,l.Lh)(5)})]})]},e.fieldId)})}),(0,N.tZ)(h.n,{border:!1}),(0,N.tZ)(d.default,{title:(0,N.BX)(N.HY,{children:["SKU 등록⭐️",(0,N.tZ)("span",{style:{fontSize:"14px",color:"#888",marginLeft:"10px",fontWeight:"400"},children:"현재 등록된 SKU를 다운로드하거나 새 파일을 업로드하세요."})]}),labelStyle:{width:"250px"},bordered:!0,extra:(0,N.tZ)(h.EK,{type:"solid",name:"샘플 다운로드",icon:(0,N.tZ)(w.Z,{}),htmlType:"button",onClick:D.gp}),children:(0,N.tZ)(d.default.Item,{span:3,label:"SKU",children:(0,N.BX)("div",{style:{display:"flex",gap:"10px"},children:[eS().skuInfoModels&&(0,N.tZ)("span",{children:(0,N.tZ)(h.EK,{type:"dashed",name:"기존 SKU 파일 다운로드",icon:(0,N.tZ)(w.Z,{}),onClick:function(){var e=null==ef?void 0:ef.map(function(e){return{No:e.number,SKU:e.sku,바코드:e.productBarcode,근시:e.myopia,난시:e.asti,축:e.axis,ADD:e.lensAdd,BC:e.bc,창고:e.wareHouseCode,"REF#2":e.ref2}});(0,D.r8)(e)}})}),(0,N.tZ)(o.Z,ProductManageSalesLenslyDetailTemplate_objectSpread(ProductManageSalesLenslyDetailTemplate_objectSpread({accept:".xlsx",maxCount:1},ek),{},{children:(0,N.tZ)(h.EK,{type:"danger",name:"새 SKU 파일 업로드",icon:(0,N.tZ)(L.Z,{})})}))]})})})]}),(0,N.tZ)(h.n,{border:!1}),(0,N.tZ)(a.Z,{defaultActiveKey:["preview"],children:(0,N.tZ)(a.Z.Panel,{header:"SKU 보기",children:(null==B?void 0:null===(t=B.skuInfoModels)||void 0===t?void 0:t.length)!==0&&(0,N.tZ)(_.Z,{skuList:null==B?void 0:B.skuInfoModels})},"preview")}),(0,N.tZ)(h.n,{border:!1}),(0,N.tZ)(h._L,{size:"default",bordered:!1,children:(0,N.BX)(h.sw,{children:[(0,N.tZ)(h.z2,{span:23,css:l.Nb,children:(0,N.tZ)(h.EK,{type:"default",name:"이전",htmlType:"button",css:(0,l.g4)(20),onClick:function(){return n.push("/admin/product/manage?tab=L")}})}),(0,N.tZ)(h.z2,{span:1,css:l.Ax,children:(0,N.tZ)(h.EK,{type:"primary",name:"수정하기",htmlType:"submit",css:(0,l.Lh)(5)})})]})})]})]})}var ProductManageDetail=function(){var e=(0,P.useRouter)().query.tabstatus;return(0,N.BX)(N.HY,{children:["bausch"===e&&(0,N.tZ)(ProductManageSalesDetailTemplate,{}),"lensly"===e&&(0,N.tZ)(ProductManageSalesLenslyDetailTemplate,{})]})};ProductManageDetail.getLayout=function(e){return(0,N.tZ)(n.L,{children:e})};var ec=ProductManageDetail},39211:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/product/manage/[tabstatus]/[id]",function(){return r(58232)}])}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=39211)}),_N_E=e.O()}]);