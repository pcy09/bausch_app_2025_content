(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8082],{88040:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}});var r=n(11163),l=n(24295),a=n(36368),o=n(60099),u=n(17621);n(53294);var i=n(56697);n(1131);var c=n(28465);n(7940);var d=n(31059);n(61105);var s=n(71535);n(45673);var f=n(8448),p=n(59499);n(54067);var h=n(64713),v=n(4730),m=n(50029),b=n(27812),g=n(87794),Z=n.n(g),S=n(87536),y=n(67294),C=n(9473);n(40682),n(86752),n(71878);var P=n(47255),I=n(25675),_=n.n(I),w=n(24969),j=n(87789);n(77809);var E=n(27127);n(46533);var L=n(64400),D=n(95966),B=n(94386),O=["ref","value","onChange"],U=["ref","onChange","value"],A=["ref","value"],N=["ref","value"],k=["ref","value"],T=["ref","value"],V=["ref","value"],x=["ref","value"],H=["ref","value"],q=["ref","value"],Q=["ref","value","onChange"],X=["ref","value"],R=["ref","value"],Y=["ref","value"],G=["ref","value"],F=["ref","value","onChange"],K=["ref","value"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,p.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var M=(0,B.BX)("div",{children:[(0,B.tZ)(w.Z,{}),(0,B.tZ)("div",{style:{marginTop:8},children:"Upload"})]}),ProductsInfoCreateTemplate=function(){var e,t,n,l=(0,y.useState)([]),p=l[0],g=l[1],I=(0,y.useState)([]),w=I[0],z=I[1],J=(0,y.useState)(p),$=J[0],ee=J[1],et=(0,y.useState)([]),en=et[0],er=et[1],el=(0,L.Z)(["lensColorLine","lensColor","lensDiameter","productBauschDrop","productLenslyDrop"]),ea=el.lensColorLine,eo=el.lensColor,eu=el.lensDiameter,ei=el.productBauschDrop,ec=el.productLenslyDrop;(0,y.useEffect)(function(){ei&&g(ei.map(function(e){return{key:"BAUSCH_APP",label:e.productGroupName,value:"group_".concat(e.productGroupId),originValue:e.productGroupId,children:e.dropProductInfoList.map(function(e){return{label:e.productName,value:e.productId}})}}))},[ei]),(0,y.useEffect)(function(){ec&&z(ec.map(function(e){return{key:"LENSLY",label:e.productGroupName,value:"group_".concat(e.productGroupId),originValue:e.productGroupId,children:e.dropProductInfoList.map(function(e){return{label:e.productName,value:e.productId}})}}))},[ec]);var ed=(0,S.cI)({}),es=ed.handleSubmit,ef=ed.control,ep=ed.getValues,eh=ed.setValue,ev=ed.watch,em=ed.reset,eb=ed.formState.errors,handleError=function(e){console.log(e);var t=eb.productId,n=eb.description,r=eb.recommendPrice;t&&eZ((0,D.lh)({description:"판매제품을 선택하세요"})),n&&eZ((0,D.lh)({description:"제품 설명을 입력해주세요"})),r&&eZ((0,D.lh)({description:"권장 소비자가를 입력해주세요"}))},eg=(0,S.qo)({control:ef,name:"channelType",defaultValue:"BAUSCH_APP"}),eZ=(0,C.I0)(),eS=(0,C.v9)(function(e){return null==e?void 0:e.optician}).opticianDetail;((null==eS?void 0:null===(n=eS.fsSaleItem)||void 0===n?void 0:n.split(","))||[]).shift();var ey=(0,C.v9)(function(e){return e.optician});ey.opticianList,ey.paging;var eC=(0,y.useState)(!1),eP=eC[0],eI=eC[1],e_=(0,y.useState)(""),ew=e_[0],ej=e_[1],eE=(0,y.useState)(""),eL=eE[0],eD=eE[1],eB=(0,y.useState)([]),eO=eB[0],eU=eB[1],eA=(0,y.useState)(!1),eN=eA[0],ek=eA[1],eT=(0,y.useState)(""),eV=eT[0],ex=eT[1],eH=(0,y.useState)(""),eq=eH[0],eQ=eH[1],eX=(0,y.useState)([]),eR=eX[0],eY=eX[1],eG=(0,y.useState)([]),eF=eG[0],eK=eG[1],eM=(0,y.useState)(""),eW=eM[0],ez=eM[1],eJ=(0,r.useRouter)(),e$=(0,r.useRouter)();e$.query,e$.back,e$.push;var e0=(e=(0,m.Z)(Z().mark(function _callee(e){var t,n,r,l,a,o;return Z().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=e[1],u.prev=1,u.next=4,(0,E.Dt)("/product-bausch/info/diopter-cycle?id=".concat(t));case 4:r=(n=u.sent).status,l=n.data,200===r&&(a=null==l?void 0:l.lensCycle,o=null==l?void 0:l.lensPowerType,eh("lensCycle",a),eh("lensPowerType",o)),u.next=12;break;case 9:u.prev=9,u.t0=u.catch(1),console.error(u.t0);case 12:case"end":return u.stop()}},_callee,null,[[1,9]])})),function(t){return e.apply(this,arguments)}),handleSendData=function(e){if(0===eO.length&&eZ((0,D.lh)({description:"썸네일 이미지를 선택하세요"})),0===eR.length&&eZ((0,D.lh)({description:"헤더 이미지를 선택하세요"})),0!==eO.length&&0!==eR.length){for(var t,n=null==eu?void 0:eu.find(function(t){return t.value.trim().toLowerCase()===e.lensDiameter.trim().toLowerCase()}),r=n?n.key:null,l=null==ea?void 0:ea.find(function(t){return t.value.trim().toLowerCase()===e.lensColorLine.trim().toLowerCase()}),a=l?l.key:null,o=null==eo?void 0:eo.find(function(t){return t.value.trim().toLowerCase()===e.lensColor.trim().toLowerCase()}),u=o?o.key:null,i=/<img[^>]*src="([^"]*)"/g,c=[];null!==(t=i.exec(e.detailDescription));)c.push(t[1]);var d=en.filter(function(e){return c.includes(e.imgUrl)}).map(function(e){return e.id}),s=en.filter(function(e){return!c.includes(e.imgUrl)}).map(function(e){return e.id});if(s.length>0){var f="BAUSCH_APP"===eg?"bausch":"lensly",p="?"+s.map(function(e){return"ids=".concat(e)}).join("&");eZ((0,j.GF)({params:p,tabStatus:f}))}var h={channelType:e.channelType,productId:e.productId[1],lensPowerType:e.lensPowerType,lensCycle:e.lensCycle,lensColorLine:a,lensColor:u,lensDiameter:r,lensBaseCurve:e.lensBaseCurve,lensThickness:e.lensThickness,lensWaterContent:e.lensWaterContent,eventProductStatus:e.eventProductStatus,lensMaterial:e.lensMaterial,lensUnit:e.lensUnit,lensPowerRange:e.lensPowerRange,description:e.description,exposedStatus:e.exposedStatus};if("BAUSCH_APP"===eg){var v=eF.map(function(e){return{productOptionName:e}}),m={basicInfo:h,imageInfo:{headerImgUrl:null,thumbImgUrl:null,detailDescription:e.detailDescription,usedImageIds:d},tagInfo:{productOptions:v,productApprovalNumber:e.productApprovalNumber,newProductStatus:e.newProductStatus}},b=eO.length>0?eO[0].originFileObj:null,g=eR.length>0?eR[0].originFileObj:null,Z=[];b&&Z.push(b),g&&Z.push(g),console.log(m,"jsonData"),eZ((0,j.j8)({sendObject:{data:m,files:Z},callback:eJ}))}else{var S={basicInfo:h,imageInfo:{headerImgUrl:null,thumbImgUrl:null,detailDescription:e.detailDescription,usedImageIds:d},priceInfo:{recommendPrice:null==e?void 0:e.recommendPrice,discountStatus:"DISCOUNT_ENABLED",memberDiscountRate:null==e?void 0:e.memberDiscountRate,opticianSupplyStatus:"OPTICIAN_SUPPLY_ENABLED",opticianSupplyRate:null==e?void 0:e.opticianSupplyRate}},y=eO.length>0?eO[0].originFileObj:null,C=eR.length>0?eR[0].originFileObj:null,P=[];y&&P.push(y),C&&P.push(C),console.log(S,"jsonData"),eZ((0,j.XD)({sendObject:{data:S,files:P},callback:eJ}))}}},handleClosePreview=function(e){"header"===e?ek(!1):eI(!1)},e1=(t=(0,m.Z)(Z().mark(function _callee2(e,t){return Z().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:"thumbnail"===t?(ej(e.url||e.thumbUrl),eD(e.name),eI(!0)):"header"===t&&(ex(e.url||e.thumbUrl),eQ(e.name),ek(!0));case 1:case"end":return n.stop()}},_callee2)})),function(e,n){return t.apply(this,arguments)}),handleUpload=function(e,t){"thumbnail"===t?eU(e.fileList):"header"===t&&eY(e.fileList)},typeHandler=function(e){eh("channelType",e.target.value)},handleRadioChange=function(e){var t=e.target.value;ez(t),eh("channelType",t);var n="BAUSCH_APP"===t?"lensly":"bausch",r=en.map(function(e){return e.id});if(r.length>0){var l="?"+r.map(function(e){return"ids=".concat(e)}).join("&");eZ((0,j.GF)({params:l,tabStatus:n})),console.log(l,"unmatchedParams!!!!!!!!!!!")}er([])};(0,y.useEffect)(function(){if(""===eW){var e="BAUSCH_APP";ez(e),eh("channelType",e),"function"==typeof onChange&&onChange({target:{value:e}})}},[]),(0,y.useEffect)(function(){"BAUSCH_APP"===eg?ee(p):"LENSLY"===eg&&ee(w)},[eg,p,w]),(0,y.useEffect)(function(){eK([]),em({channelType:eg,tags:[]}),eU([]),eI(!1),ej(""),eD(""),eY([]),ek(!1),ex(""),eQ(""),eh("detailDescription","")},[eg,em]);var handleEditorImages=function(e){er(function(t){return[].concat((0,b.Z)(t),[e])})};return(0,B.BX)(B.HY,{children:[(0,B.tZ)("div",{css:o.Y2,children:(0,B.tZ)(P.Z,{title:"\uD83D\uDC49\uD83C\uDFFC BAUSCH APP, LENSLY 채널의 상품 페이지를 관리하는 페이지입니다. 채널별 상품 정보를 등록할 수 있습니다."})}),(0,B.tZ)(u.n,{border:!1}),(0,B.BX)(u.l0,{onSubmit:es(function(e){return handleSendData(e)},function(e){return handleError(e)}),children:[(0,B.BX)(u._L,{children:[(0,B.BX)(f.default,{title:"채널 및 제품 선택",bordered:!0,column:4,labelStyle:{width:"250px"},children:[(0,B.tZ)(f.default.Item,{span:2,label:"채널 선택 ⭐️",children:(0,B.tZ)(S.Qr,{name:"channelType",control:ef,defaultValue:"",render:function(e){var t=e.field,n=(t.ref,t.value,t.onChange),r=(0,v.Z)(t,O);return e.fieldState,(0,B.tZ)(h.default.Group,_objectSpread({options:[{label:"BAUSCH-APP",value:"BAUSCH_APP"},{label:"LENSLY",value:"LENSLY"}],value:eW,onChange:function(e){function onChange(t){return e.apply(this,arguments)}return onChange.toString=function(){return e.toString()},onChange}(function(e){handleRadioChange(e),"function"==typeof n&&n(e),typeHandler(e)})},r))},rules:{required:!0}})}),(0,B.tZ)(f.default.Item,{span:2,label:"제품 선택 ⭐️",children:(0,B.tZ)(S.Qr,{name:"productId",control:ef,defaultValue:[],render:function(e){var t=e.field,n=(t.ref,t.onChange),r=t.value,l=(0,v.Z)(t,U);return e.fieldState,(0,B.tZ)(s.Z,_objectSpread(_objectSpread({style:{width:"100%"},name:"productId",control:ef,placeholder:"판매 제품을 선택하세요.",options:$,value:r,onChange:function(e){function onChange(t){return e.apply(this,arguments)}return onChange.toString=function(){return e.toString()},onChange}(function(e){n(e),e0(e)})},l),{},{defaultValue:""}))},rules:{required:!0}})})]}),(0,B.tZ)(u.n,{border:!1}),(0,B.BX)(f.default,{column:4,title:"상세 정보",bordered:!0,children:[(0,B.tZ)(f.default.Item,{span:2,label:"도수구분",children:(0,B.tZ)(S.Qr,{name:"lensPowerType",control:ef,defaultValue:"",render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,v.Z)(t,A);return e.fieldState,(0,B.tZ)(u.kq,_objectSpread(_objectSpread({type:"text",value:n||null},r),{},{disabled:!0}))}})}),(0,B.tZ)(f.default.Item,{span:2,label:"사용구분",children:(0,B.tZ)(S.Qr,{name:"lensCycle",control:ef,defaultValue:"",render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,v.Z)(t,N);return e.fieldState,(0,B.tZ)(u.kq,_objectSpread(_objectSpread({type:"text",value:n||null},r),{},{disabled:!0}))}})}),(0,B.tZ)(f.default.Item,{span:2,label:"컬러라인",children:(0,B.tZ)(S.Qr,{name:"lensColorLine",control:ef,defaultValue:"",render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,v.Z)(t,k);return e.fieldState,(0,B.tZ)(u.jL,_objectSpread({options:ea,value:n||null,placeholder:"선택해주세요"},r))}})}),(0,B.tZ)(f.default.Item,{span:2,label:"컬러",children:(0,B.tZ)(S.Qr,{name:"lensColor",control:ef,defaultValue:"",render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,v.Z)(t,T);return e.fieldState,(0,B.tZ)(u.jL,_objectSpread({options:eo,value:n||null,placeholder:"선택해주세요"},r))}})}),(0,B.tZ)(f.default.Item,{span:2,label:"직경",children:(0,B.tZ)(S.Qr,{name:"lensDiameter",control:ef,defaultValue:"",render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,v.Z)(t,V);return e.fieldState,(0,B.tZ)(u.jL,_objectSpread({options:eu,value:n||null,placeholder:"선택해주세요"},r))}})}),(0,B.tZ)(f.default.Item,{span:2,label:"BC(곡률)",children:(0,B.tZ)(S.Qr,{name:"lensBaseCurve",control:ef,defaultValue:"",render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,v.Z)(t,x);return e.fieldState,(0,B.tZ)(u.kq,_objectSpread({type:"text",value:n||null,placeholder:"입력해주세요."},r))}})}),(0,B.tZ)(f.default.Item,{span:2,label:"중심두께",children:(0,B.tZ)(S.Qr,{name:"lensThickness",control:ef,defaultValue:"",render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,v.Z)(t,H);return e.fieldState,(0,B.tZ)(u.kq,_objectSpread({type:"text",value:n||null,placeholder:"중심 두께를 입력해주세요.."},r))}})}),(0,B.tZ)(f.default.Item,{span:2,label:"함수율",children:(0,B.tZ)(S.Qr,{name:"lensWaterContent",control:ef,defaultValue:"",render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,v.Z)(t,q);return e.fieldState,(0,B.tZ)(u.kq,_objectSpread(_objectSpread({type:"text",placeholder:"함수율을 입력해주세요."},r),{},{value:n||null}))}})}),(0,B.tZ)(f.default.Item,{span:2,label:"이벤트 제품",children:(0,B.tZ)(S.Qr,{name:"eventProductStatus",control:ef,defaultValue:"NON_EVENT",render:function(e){var t=e.field,n=(t.ref,t.value),r=t.onChange,l=(0,v.Z)(t,Q);return e.fieldState,(0,B.tZ)(d.default,_objectSpread(_objectSpread({checked:"EVENT"===n,onChange:function(e){function onChange(t){return e.apply(this,arguments)}return onChange.toString=function(){return e.toString()},onChange}(function(e){r(e.target.checked?"EVENT":"NON_EVENT")})},l),{},{children:"이벤트 상품 등록"}))}})}),(0,B.tZ)(f.default.Item,{span:2,label:"재질",children:(0,B.tZ)(S.Qr,{name:"lensMaterial",control:ef,defaultValue:"",render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,v.Z)(t,X);return e.fieldState,(0,B.tZ)(u.kq,_objectSpread({type:"text",value:n||null,placeholder:"재질을 입력해주세요."},r))}})}),(0,B.tZ)(f.default.Item,{span:2,label:"개입",children:(0,B.tZ)(S.Qr,{name:"lensUnit",control:ef,defaultValue:"",render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,v.Z)(t,R);return e.fieldState,(0,B.tZ)(u.kq,_objectSpread({type:"text",value:n||null,placeholder:"입력해주세요."},r))}})}),(0,B.tZ)(f.default.Item,{span:2,label:"도수범위",children:(0,B.tZ)(S.Qr,{name:"lensPowerRange",control:ef,defaultValue:"",render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,v.Z)(t,Y);return e.fieldState,(0,B.tZ)(u.kq,_objectSpread({type:"text",value:n||null,placeholder:"입력해주세요."},r))}})}),(0,B.tZ)(f.default.Item,{span:4,label:"제품 설명 ⭐️",children:(0,B.tZ)(S.Qr,{name:"description",control:ef,render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,v.Z)(t,G);return e.fieldState,(0,B.tZ)(u.FF,_objectSpread({defaultValue:"",value:n||"",placeholder:"제품 설명을 입력해주세요."},r))},rules:{required:!0}})})]}),(0,B.tZ)(u.n,{border:!1}),(0,B.BX)(f.default,{title:"이미지 등록",bordered:!0,column:4,labelStyle:{width:"250px"},children:[(0,B.tZ)(f.default.Item,{span:4,label:(0,B.BX)("div",{children:["썸네일 이미지 ⭐️",(0,B.tZ)("div",{css:o.qD,children:"이미지사이즈 244x244"})]}),children:(0,B.BX)(B.HY,{children:[(0,B.tZ)(c.Z,{listType:"picture-card",fileList:eO,onPreview:function(e){return e1(e,"thumbnail")},onChange:function(e){return handleUpload(e,"thumbnail")},beforeUpload:function(){return!1},children:eO.length>=1?null:M}),(0,B.tZ)(i.Z,{width:800,centered:!0,open:eP,title:eL,footer:null,onCancel:function(){return handleClosePreview("thumbnail")},style:{position:"relative"},children:(0,B.tZ)(_(),{src:ew,width:1e3,height:500,style:{width:"100%",height:"auto"},alt:"thumbnailPreviewImage",layout:"responsive"})})]})}),(0,B.tZ)(f.default.Item,{span:4,label:(0,B.tZ)(B.HY,{children:"BAUSCH_APP"===eg?(0,B.BX)("div",{children:["헤더 이미지 ⭐️",(0,B.tZ)("div",{css:o.qD,children:"이미지사이즈 440x260"})]}):(0,B.BX)("div",{children:["렌즈 이미지 ⭐️",(0,B.tZ)("div",{css:o.qD,children:"이미지사이즈 40x40"})]})}),children:(0,B.BX)(B.HY,{children:[(0,B.tZ)(c.Z,{listType:"picture-card",fileList:eR,onPreview:function(e){return e1(e,"header")},onChange:function(e){return handleUpload(e,"header")},beforeUpload:function(){return!1},children:eR.length>=1?null:M}),(0,B.tZ)(i.Z,{width:800,centered:!0,open:eN,title:eq,footer:null,onCancel:function(){return handleClosePreview("header")},style:{position:"relative"},children:(0,B.tZ)(_(),{src:eV,width:1e3,height:500,style:{width:"100%",height:"auto"},alt:"headerPreviewImage",layout:"responsive"})})]})}),(0,B.tZ)(f.default.Item,{span:4,label:"제품 상세 내용",children:(0,B.tZ)(S.Qr,{name:"detailDescription",control:ef,render:function(e){var t=e.field,n=(t.ref,t.value),r=t.onChange;return(0,v.Z)(t,F),(0,B.tZ)(u.wR,{border:!1,value:n||"",onChange:function(e){function onChange(t){return e.apply(this,arguments)}return onChange.toString=function(){return e.toString()},onChange}(function(e){r(e)}),apiUrl:"BAUSCH_APP"===eg?"/product-bausch/info/image":"/product-lensly/info/image",isError:null==eb?void 0:eb.content,handleEditorImages:handleEditorImages,customHeight:"800px"})}})})]}),(0,B.tZ)(u.n,{border:!1}),"BAUSCH_APP"===eg&&(0,B.tZ)(a.Bc,{tags:eF,handleDelete:function(e){eK(e)},handleAddition:function(e){eK(function(t){return[].concat((0,b.Z)(t),[e])})},control:ef}),(0,B.tZ)(S.RV,{handleSubmit:es,control:ef,getValues:ep,setValue:eh,watch:ev,reset:em,children:"LENSLY"===eg&&(0,B.tZ)(a.JQ,{control:ef})}),(0,B.tZ)(u.n,{border:!1}),(0,B.tZ)(f.default,{column:4,title:"노출 여부",bordered:!0,children:(0,B.tZ)(f.default.Item,{span:4,label:"노출 여부 ⭐️",children:(0,B.tZ)(S.Qr,{name:"exposedStatus",control:ef,defaultValue:"EXPOSED",render:function(e){var t=e.field,n=(t.ref,t.value),r=(0,v.Z)(t,K);return e.fieldState,(0,B.tZ)(h.default.Group,_objectSpread({options:[{label:"노출",value:"EXPOSED"},{label:"비노출",value:"HIDDEN"}],onChange:function(e){return console.log(e)},value:n||"N"},r))},rules:{required:!0}})})})]}),(0,B.tZ)(u.n,{border:!1}),(0,B.tZ)(u._L,{children:(0,B.tZ)(u.sw,{children:(0,B.BX)(u.z2,{span:24,css:W,children:[(0,B.tZ)(u.EK,{type:"default",name:"이전",htmlType:"button",onClick:function(){return eJ.push("/admin/product/page-manage")},css:(0,o.g4)(5)}),(0,B.tZ)(u.EK,{type:"primary",name:"등록하기",htmlType:"submit",css:(0,o.Lh)(5)})]})})})]})]})},W={name:"1066lcq",styles:"display:flex;justify-content:space-between;align-items:center"};n(82451);var ProductPageSub=function(){var e=(0,r.useRouter)();return e.query,e.back,e.push,(0,B.tZ)(B.HY,{children:(0,B.tZ)(ProductsInfoCreateTemplate,{})})};ProductPageSub.getLayout=function(e){return(0,B.tZ)(l.L,{children:e})};var z=ProductPageSub},61936:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/product/page-manage/sub",function(){return n(88040)}])}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=61936)}),_N_E=e.O()}]);