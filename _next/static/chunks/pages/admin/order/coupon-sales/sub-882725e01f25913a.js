(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3597],{92818:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return el}});var n=t(24295),r=t(59499),a=t(77191),i=t(17621),l=t(87536),d=t(47255),c=t(67294),u=t(11163);t(89858);var s=t(51024),p=t(4730);t(45673);var f=t(8448),m=t(9473),b=t(60099);t(72445),t(90805),t(71878);var v=t(82121),g=t(64400),h=t(86752),y=t(94386),S=["ref","value"];function ownKeys(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,n)}return t}function _objectSpread(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?ownKeys(Object(t),!0).forEach(function(o){(0,r.Z)(e,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})}return e}var OrderCouponSection_OrderUserSection=function(e){var o=e.storeData,t=e.onSearch,n=e.setUserData,r=[{title:"회원구분",dataIndex:"memberType",align:"center"},{title:"회원명",dataIndex:"memberName",align:"center"},{title:"휴대폰 번호",dataIndex:"memberPhone",align:"center"},{title:"회원 ID",dataIndex:"memberLoginId",align:"center"},{title:"근시(좌)",dataIndex:"myopiaLeft",align:"center"},{title:"난시(좌)",dataIndex:"astiLeft",align:"center"},{title:"측(좌)",dataIndex:"axisLeft",align:"center"},{title:"근시(우)",dataIndex:"myopiaRight",align:"center"},{title:"난시(우)",dataIndex:"astiRight",align:"center"},{title:"측(우)",dataIndex:"axisRight",align:"center"},{title:"선택",dataIndex:"",align:"center",render:function(e,o){return(0,y.tZ)("a",{onClick:function(){return handleSelectStore(o)},style:{cursor:"pointer",color:"#1890ff"},children:"선택"})}}],a=(0,g.Z)(["memberSearchCond"]).memberSearchCond,d=(0,c.useState)([]),u=d[0],I=d[1],C=(0,l.Gc)(),Z=C.control,O=C.getValues,R=C.setValue,D=C.reset,j=(0,c.useState)({memberName:"",memberPhone:"",storeName:"",storeCode:"",memberId:"",storeId:""}),x=j[0],A=j[1];(0,c.useEffect)(function(){a&&I((0,h.RG)(a))},[a]);var _=(0,m.I0)(),handleSearch=function(e){if(""===e){alert("검색얼르 입력해주세요");return}t({memberSearchCond:O("userOption"),searchValue:e})},handleSelectStore=function(e){var o={id:e.memberId};_((0,v.r5)(o)),A({memberId:e.memberId,storeId:e.storeId,memberName:e.memberName,memberPhone:e.memberPhone,storeName:e.storeName,storeCode:e.storeCode}),n({memberId:e.memberId,myopiaLeft:e.myopiaLeft,astiLeft:e.astiLeft,axisLeft:e.axisLeft,lensAddLeft:e.lensAddLeft,myopiaRight:e.myopiaRight,astiRight:e.astiRight,axisRight:e.axisRight,lensAddRight:e.lensAddRight})},handleMemberNameClick=function(){x.memberId&&window.open("/admin/member/".concat(x.memberId),"_blank")},handleStoreNameClick=function(){x.storeId&&window.open("/admin/store/manage/".concat(x.storeId),"_blank")};return(0,c.useEffect)(function(){R("selectedMemberName",x.memberName,{shouldValidate:!0}),R("selectedMemberPhone",x.memberPhone,{shouldValidate:!0}),R("selectedStoreName",x.storeName,{shouldValidate:!0}),R("selectedStoreCode",x.storeCode,{shouldValidate:!0})},[x,R]),(0,y.BX)(y.HY,{children:[(0,y.tZ)(f.default,{title:"판매 회원 선택"}),(0,y.BX)(i.sw,{css:(0,b.yR)(12),gutter:12,children:[(0,y.tZ)(i.z2,{span:16,css:M}),(0,y.tZ)(i.z2,{span:3,css:b.Bd,children:(0,y.tZ)(l.Qr,{name:"userOption",control:Z,defaultValue:"MEMBER_NAME",render:function(e){var o=e.field,t=(o.ref,o.value),n=(0,p.Z)(o,S);return e.fieldState,(0,y.tZ)(i.jL,_objectSpread({options:u,value:t||null,placeholder:"회원 옵션"},n))}})}),(0,y.tZ)(i.z2,{span:5,children:(0,y.tZ)(l.Qr,{name:"searchText",control:Z,render:function(e){var o=e.field;return(0,y.tZ)(s.default.Search,_objectSpread(_objectSpread({},o),{},{type:"text",placeholder:"검색어 입력",onSearch:handleSearch,enterButton:!0}))}})})]}),(0,y.tZ)(i.wY,{listData:o,columns:r,detail:!1,rowKey:"memberLoginId"}),(0,y.tZ)(i.n,{border:!1}),(0,y.BX)(y.HY,{children:[(0,y.BX)(f.default,{column:3,bordered:!0,children:[(0,y.tZ)(f.default.Item,{span:1,label:"회원명",children:(0,y.tZ)(l.Qr,{name:"selectedMemberName",control:Z,render:function(e){var o=e.field;return(0,y.tZ)(s.default,_objectSpread(_objectSpread({},o),{},{onClick:handleMemberNameClick,style:{cursor:"pointer",fontWeight:"bold",color:"#1890ff"},readOnly:!0}))}})}),(0,y.tZ)(f.default.Item,{span:2,label:"휴대폰 번호",children:(0,y.tZ)(l.Qr,{name:"selectedMemberPhone",control:Z,render:function(e){var o=e.field;return(0,y.tZ)(s.default,_objectSpread(_objectSpread({},o),{},{readOnly:!0}))}})}),(0,y.tZ)(f.default.Item,{span:1,label:"판매 스토어 (마이 스토어)",children:(0,y.tZ)(l.Qr,{name:"selectedStoreName",control:Z,render:function(e){var o=e.field;return(0,y.tZ)(s.default,_objectSpread(_objectSpread({},o),{},{onClick:handleStoreNameClick,style:{cursor:"pointer",fontWeight:"bold",color:"#1890ff"},readOnly:!0}))}})}),(0,y.tZ)(f.default.Item,{span:2,label:"스토어 코드",children:(0,y.tZ)(l.Qr,{name:"selectedStoreCode",control:Z,render:function(e){var o=e.field;return(0,y.tZ)(s.default,_objectSpread(_objectSpread({},o),{},{readOnly:!0}))}})})]}),(0,y.tZ)(i.sw,{css:b.Ax,style:{padding:"10px"},gutter:12,children:(0,y.tZ)(i.EK,{type:"dash",name:"초기화",onClick:function(){D({selectedStoreName:"",selectedStoreCode:"",selectedMemberName:"",selectedMemberPhone:"",userOption:"",searchText:""}),_((0,v.Fq)())}})})]})]})},M=[".jsx-584669038{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}"];M.__hash="584669038",t(83266),t(89626);var I=t(70302);t(30467);var C=t(55673);t(61105);var Z=t(71535);t(58136);var O=t(5789);t(77785);var R=t(59361),D=t(50029),j=t(27812);t(23461);var x=t(53740),A=t(87794),_=t.n(A),w=t(87462),P={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112c17.7 0 32 14.3 32 32v736c0 17.7-14.3 32-32 32H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32zM639.98 338.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-square",theme:"filled"},L=t(84145),B=c.forwardRef(function(e,o){return c.createElement(L.Z,(0,w.Z)({},e,{ref:o,icon:P}))});t(77809);var N=t(27127),k=["ref","value","label","onChange"],E=["ref","value","onChange"],Q=["ref","value","label","onChange"],X=["ref","value","label","onChange"],V=["ref","value","label","onChange"],T=["ref","value","label","onChange"],K=["ref","value","label","onChange"],G=["ref","value","onChange"],Y=["ref","value","label","onChange"],H=["ref","value","label","onChange"],q=["ref","value","label","onChange"],z=["ref","value","label","onChange"];function OrderBioCouponSection_ownKeys(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,n)}return t}function OrderBioCouponSection_objectSpread(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?OrderBioCouponSection_ownKeys(Object(t),!0).forEach(function(o){(0,r.Z)(e,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):OrderBioCouponSection_ownKeys(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})}return e}var U=x.Z.Text,OrderCouponCardStatusSection_OrderBioCouponSection=function(e){var o,t=e.couponCardList,n=e.couponDropData,r=e.userData,a=e.setSelectedCards,d=(e.selectedCards,e.optionData),u=e.setOptionData,s=(0,m.I0)(),b=(0,l.Gc)(),g=b.control,h=b.getValues,S=b.setValue;b.reset,b.watch;var M=(0,c.useState)([]),x=M[0],A=M[1],w=r.myopiaLeft,P=r.astiLeft,L=r.axisLeft,$=r.lensAddLeft,ee=r.myopiaRight,eo=r.astiRight,et=r.axisRight,en=r.lensAddRight,er=r.memberId;(0,c.useEffect)(function(){n.length>0&&A(reorderArray(t,n.map(function(e){return OrderBioCouponSection_objectSpread(OrderBioCouponSection_objectSpread({},e),{},{productDropData:e.productDropData.map(function(e){return{label:e.productGroupName,value:e.productGroupId,children:e.dropProductInfoList.map(function(e){return{label:e.productName,value:e.productId}})}}),giftDropData:e.giftDropData.map(function(e){return{label:e.productGroupName,value:e.productGroupId,children:e.dropProductInfoList.map(function(e){return{label:e.productName,value:e.productId}})}})})})))},[n,t]);var reorderArray=function(e,o){var t=e.map(function(e){return e.couponId}),n=new Map(o.map(function(e){return[e.couponId,e]}));return t.map(function(e){return n.get(e)}).filter(function(e){return void 0!==e})},handleChangeEyeSide=function(e,o,t){var n=h("couponRegisterModels[".concat(e,"].couponRegisterInfoModels[").concat(o,"].memberDiopterModel")),r=t.isSyncLens,a=t.length,i=t.salesProductQuantity,l=n.eyeSide,d=n.memberMyopia,c=n.memberAsti,u=n.memberAxis,s=n.memberAdd,p=w,f=P,m=L,b=$;"right"===l&&(p=ee,f=eo,m=et,b=en),d&&S("couponRegisterModels[".concat(e,"].couponRegisterInfoModels[").concat(o,"].memberDiopterModel.memberMyopia"),p),c&&S("couponRegisterModels[".concat(e,"].couponRegisterInfoModels[").concat(o,"].memberDiopterModel.memberAsti"),f),u&&S("couponRegisterModels[".concat(e,"].couponRegisterInfoModels[").concat(o,"].memberDiopterModel.memberAxis"),m),s&&S("couponRegisterModels[".concat(e,"].couponRegisterInfoModels[").concat(o,"].memberDiopterModel.memberAdd"),b),r&&setGiftDiopter(e,i,a)},handleRemoveCard=function(e,o){a(function(o){return o.includes(e)?o.filter(function(o){return o!==e}):[].concat((0,j.Z)(o),[e])}),s((0,v.Hh)({params:{couponId:e,couponIssueId:o}}))},ea=(o=(0,D.Z)(_().mark(function _callee(e,o,n,r,a){var i,l,d,c,s,p,f,m,b,v,g,y,M,I,C,Z,O,R,D,x,A;return _().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return i={couponId:e,productId:n,memberId:o},_.prev=1,_.next=4,(0,N.Dt)("/transaction/coupon/product/diopter/select",i);case 4:if(d=(l=_.sent).status,c=l.data,200===d){for(p in s=null==c?void 0:c.result)Array.isArray(s[p])&&1===s[p].length&&null===s[p][0]&&(s[p]=null);f=s.myopia,m=s.asti,b=s.axis,v=s.add,g=t.findIndex(function(o){return o.couponId===e}),y=h("couponRegisterModels[".concat(g,"].couponRegisterInfoModels[").concat(r,"].memberDiopterModel.eyeSide")),M=w,I=P,C=L,Z=$,"right"===y&&(M=ee,I=eo,C=et,Z=en),O=a.isSyncLens,R=a.isSyncProduct,D=a.length,x=a.salesProductQuantity,(A=function(e,o,t){if(!e&&r<x)S("couponRegisterModels[".concat(g,"].couponRegisterInfoModels[").concat(r,"].memberDiopterModel.").concat(o),"");else if(e&&O&&!R&&r<x)S("couponRegisterModels[".concat(g,"].couponRegisterInfoModels[").concat(r,"].memberDiopterModel.").concat(o),t);else if(e&&O&&R&&r<x)for(var n=0;n<x;n++)S("couponRegisterModels[".concat(g,"].couponRegisterInfoModels[").concat(n,"].memberDiopterModel.").concat(o),t);else if(e&&!O&&R)for(var a=0;a<D;a++)S("couponRegisterModels[".concat(g,"].couponRegisterInfoModels[").concat(a,"].memberDiopterModel.").concat(o),t);else e&&!O&&S("couponRegisterModels[".concat(g,"].couponRegisterInfoModels[").concat(r,"].memberDiopterModel.").concat(o),t)})(f,"memberMyopia",M),A(m,"memberAsti",I),A(b,"memberAxis",C),A(v,"memberAdd",Z),u(function(e){var o=(0,j.Z)(e);if(o[g]||(o[g]=[]),o[g][r]||(o[g][r]={options:null}),O&&!R&&r<x&&(o[g][r].options={myopia:transformArray(f),asti:transformArray(m),axis:transformArray(b),add:transformArray(v)}),O&&R&&r<x)for(var t=0;t<x;t++)o[g][t]||(o[g][t]={options:null}),o[g][t].options={myopia:transformArray(f),asti:transformArray(m),axis:transformArray(b),add:transformArray(v)};if(!O&&R)for(var n=0;n<D;n++)o[g][n]||(o[g][n]={options:null}),o[g][n].options={myopia:transformArray(f),asti:transformArray(m),axis:transformArray(b),add:transformArray(v)};else o[g][r].options={myopia:transformArray(f),asti:transformArray(m),axis:transformArray(b),add:transformArray(v)};return o}),O&&setGiftDiopter(g,x,D)}_.next=12;break;case 9:_.prev=9,_.t0=_.catch(1),console.error(_.t0);case 12:case"end":return _.stop()}},_callee,null,[[1,9]])})),function(e,t,n,r,a){return o.apply(this,arguments)}),transformArray=function(e){return e?e.map(function(e){return{value:e,label:e}}):null},handleResetProduct=function(e,o,n){var r=t.findIndex(function(o){return o.couponId===e}),a=n.isSyncLens,i=n.isSyncProduct,l=n.length,d=n.salesProductQuantity;u(function(e){var t=(0,j.Z)(e);if(!i)return t[r][o].options={myopia:null,asti:null,axis:null,add:null},S("couponRegisterModels[".concat(r,"].couponRegisterInfoModels[").concat(o,"].memberDiopterModel.memberMyopia"),""),S("couponRegisterModels[".concat(r,"].couponRegisterInfoModels[").concat(o,"].memberDiopterModel.memberAsti"),""),S("couponRegisterModels[".concat(r,"].couponRegisterInfoModels[").concat(o,"].memberDiopterModel.memberAxis"),""),S("couponRegisterModels[".concat(r,"].couponRegisterInfoModels[").concat(o,"].memberDiopterModel.memberAdd"),""),t;if(!a&&i){for(var n=0;n<l;n++)t[r][n].options={myopia:null,asti:null,axis:null,add:null},S("couponRegisterModels[".concat(r,"].couponRegisterInfoModels[").concat(n,"].memberDiopterModel.memberMyopia"),""),S("couponRegisterModels[".concat(r,"].couponRegisterInfoModels[").concat(n,"].memberDiopterModel.memberAsti"),""),S("couponRegisterModels[".concat(r,"].couponRegisterInfoModels[").concat(n,"].memberDiopterModel.memberAxis"),""),S("couponRegisterModels[".concat(r,"].couponRegisterInfoModels[").concat(n,"].memberDiopterModel.memberAdd"),"");return t}for(var c=0;c<d;c++)t[r][c].options={myopia:null,asti:null,axis:null,add:null},S("couponRegisterModels[".concat(r,"].couponRegisterInfoModels[").concat(c,"].memberDiopterModel.memberMyopia"),""),S("couponRegisterModels[".concat(r,"].couponRegisterInfoModels[").concat(c,"].memberDiopterModel.memberAsti"),""),S("couponRegisterModels[".concat(r,"].couponRegisterInfoModels[").concat(c,"].memberDiopterModel.memberAxis"),""),S("couponRegisterModels[".concat(r,"].couponRegisterInfoModels[").concat(c,"].memberDiopterModel.memberAdd"),"");return t}),a&&setGiftDiopter(r,d,l)},setGiftDiopter=function(e,o,t){u(function(n){var r=(0,j.Z)(n);r[e]||(r[e]=[]);for(var a=[],i=[],l=[],d=[],c=0;c<o;c++){var u=h("couponRegisterModels[".concat(e,"].couponRegisterInfoModels[").concat(c,"].memberDiopterModel.memberMyopia")),s=h("couponRegisterModels[".concat(e,"].couponRegisterInfoModels[").concat(c,"].memberDiopterModel.memberAsti")),p=h("couponRegisterModels[".concat(e,"].couponRegisterInfoModels[").concat(c,"].memberDiopterModel.memberAxis")),f=h("couponRegisterModels[".concat(e,"].couponRegisterInfoModels[").concat(c,"].memberDiopterModel.memberAdd"));u&&!a.includes(u)&&(a=a.concat(u)),s&&!i.includes(s)&&(i=i.concat(s)),p&&!l.includes(p)&&(l=l.concat(p)),f&&!d.includes(f)&&(d=d.concat(f))}for(var m=o;m<t;m++)r[e][m]||(r[e][m]={options:null}),r[e][m].options={myopia:transformArray(a),asti:transformArray(i),axis:transformArray(l),add:transformArray(d)},0===a.length&&S("couponRegisterModels[".concat(e,"].couponRegisterInfoModels[").concat(m,"].memberDiopterModel.memberMyopia"),""),0===i.length&&S("couponRegisterModels[".concat(e,"].couponRegisterInfoModels[").concat(m,"].memberDiopterModel.memberAsti"),""),0===l.length&&S("couponRegisterModels[".concat(e,"].couponRegisterInfoModels[").concat(m,"].memberDiopterModel.memberAxis"),""),0===d.length&&S("couponRegisterModels[".concat(e,"].couponRegisterInfoModels[").concat(m,"].memberDiopterModel.memberAdd"),"");return r})},handleChangeDiopter=function(e,o){var t=o.isSyncLens,n=o.length,r=o.salesProductQuantity;t&&setGiftDiopter(e,r,n)};return(0,y.BX)(i._L,{css:W,children:[(0,y.tZ)(f.default,{title:"제품 선택"}),null==x?void 0:x.map(function(e,o){var n=t.findIndex(function(o){return o.couponId===e.couponId}),r="SYNC_LENS_POWER_ON"===e.syncLensPowerStatus,a="SYNC_SALE_ON"===e.syncSaleGiftStatus,c={isSyncLens:r,isSyncProduct:a,isLensRequire:!r&&a,isLensDisable:r&&!a,salesProductQuantity:e.salesProductQuantity,length:e.salesProductQuantity+e.giftProductQuantity};return(0,y.BX)("div",{children:[(0,y.BX)(I.Z,{extra:(0,y.tZ)(B,{onClick:function(){handleRemoveCard(e.couponId,e.couponIssueId)},css:F}),bordered:!1,title:e.couponName,children:[(0,y.tZ)(l.Qr,{name:"couponRegisterModels[".concat(n,"].couponIssueId"),defaultValue:e.couponIssueId,control:g,render:function(){return null}}),(0,y.BX)(C.Z,{gutter:[24,24],children:[(0,y.tZ)(O.Z,{span:24,children:(0,y.BX)("div",{css:J,children:[(0,y.BX)(R.default,{color:"할인"===e.couponType?"red":"geekblue",children:[e.couponType,"쿠폰"]}),(0,y.BX)("div",{children:[r&&(0,y.tZ)(R.default,{children:"동일 도수 적용"}),a&&(0,y.tZ)(R.default,{children:"동일 제품 적용"})]})]})}),Array.from({length:e.salesProductQuantity}).map(function(o,t){return(0,y.tZ)(O.Z,{span:24,children:(0,y.BX)(C.Z,{gutter:24,align:"middle",children:[(0,y.BX)(O.Z,{span:9,children:[(0,y.tZ)(U,{children:"판매제품"}),(0,y.tZ)(l.Qr,{name:"couponRegisterModels[".concat(n,"].couponRegisterInfoModels[").concat(t,"].productType"),defaultValue:"SALES_PRODUCT",control:g,render:function(){return null}}),(0,y.tZ)(l.Qr,{name:"couponRegisterModels[".concat(n,"].couponRegisterInfoModels[").concat(t,"].productId"),control:g,disabled:a&&0!==t,render:function(o){var n=o.field,r=(n.ref,n.value),i=(n.label,n.onChange),l=(0,p.Z)(n,k);return o.fieldState,(0,y.tZ)(Z.Z,OrderBioCouponSection_objectSpread({value:r,style:{width:"100%"},options:null==e?void 0:e.productDropData,onChange:function(o){if(o){i(o);var n=o[o.length-1];ea(e.couponId,er,n,t,c)}else i(o),handleResetProduct(e.couponId,t,c)},placeholder:a&&0!==t?"":"판매제품",multiple:!1},l))}})]}),(0,y.tZ)(O.Z,{span:3,children:(0,y.tZ)(l.Qr,{name:"couponRegisterModels[".concat(n,"].couponRegisterInfoModels[").concat(t,"].memberDiopterModel.eyeSide"),control:g,defaultValue:"left",render:function(e){var o=e.field,r=(o.ref,o.value),a=o.onChange,l=(0,p.Z)(o,E);return e.fieldState,(0,y.tZ)(i.Tr,OrderBioCouponSection_objectSpread({onChange:function(e){a(e),handleChangeEyeSide(n,t,c)},options:[{key:1,value:"left",label:"좌"},{key:2,value:"right",label:"우"}],value:r},l))},rules:{required:!0}})}),(0,y.BX)(O.Z,{span:3,children:[(0,y.tZ)(U,{children:"근시"}),(0,y.tZ)(l.Qr,{name:"couponRegisterModels[".concat(n,"].couponRegisterInfoModels[").concat(t,"].memberDiopterModel.memberMyopia"),control:g,defaultValue:"",render:function(e){var o,r,a,l,u,s,f=e.field,m=(f.ref,f.value),b=(f.label,f.onChange),v=(0,p.Z)(f,Q);return e.fieldState,(0,y.tZ)(i.jL,OrderBioCouponSection_objectSpread({placeholder:"선택",value:m,onChange:function(e){b(e),handleChangeDiopter(n,c)},options:(null===(o=d[n])||void 0===o?void 0:null===(r=o[t])||void 0===r?void 0:null===(a=r.options)||void 0===a?void 0:a.myopia)||[],isDisabled:!(null!==(l=d[n])&&void 0!==l&&null!==(u=l[t])&&void 0!==u&&null!==(s=u.options)&&void 0!==s&&s.myopia)},v))}})]}),(0,y.BX)(O.Z,{span:3,children:[(0,y.tZ)(U,{children:"난시"}),(0,y.tZ)(l.Qr,{name:"couponRegisterModels[".concat(n,"].couponRegisterInfoModels[").concat(t,"].memberDiopterModel.memberAsti"),control:g,defaultValue:"",render:function(e){var o,r,a,l,u,s,f=e.field,m=(f.ref,f.value),b=(f.label,f.onChange),v=(0,p.Z)(f,X);return e.fieldState,(0,y.tZ)(i.jL,OrderBioCouponSection_objectSpread({placeholder:"선택",value:m,onChange:function(e){b(e),handleChangeDiopter(n,c)},options:(null===(o=d[n])||void 0===o?void 0:null===(r=o[t])||void 0===r?void 0:null===(a=r.options)||void 0===a?void 0:a.asti)||[],isDisabled:!(null!==(l=d[n])&&void 0!==l&&null!==(u=l[t])&&void 0!==u&&null!==(s=u.options)&&void 0!==s&&s.asti)},v))}})]}),(0,y.BX)(O.Z,{span:3,children:[(0,y.tZ)(U,{children:"축"}),(0,y.tZ)(l.Qr,{name:"couponRegisterModels[".concat(n,"].couponRegisterInfoModels[").concat(t,"].memberDiopterModel.memberAxis"),control:g,defaultValue:"",render:function(e){var o,r,a,l,u,s,f=e.field,m=(f.ref,f.value),b=(f.label,f.onChange),v=(0,p.Z)(f,V);return e.fieldState,(0,y.tZ)(i.jL,OrderBioCouponSection_objectSpread({placeholder:"선택",value:m,onChange:function(e){b(e),handleChangeDiopter(n,c)},options:(null===(o=d[n])||void 0===o?void 0:null===(r=o[t])||void 0===r?void 0:null===(a=r.options)||void 0===a?void 0:a.axis)||[],isDisabled:!(null!==(l=d[n])&&void 0!==l&&null!==(u=l[t])&&void 0!==u&&null!==(s=u.options)&&void 0!==s&&s.axis)},v))}})]}),(0,y.BX)(O.Z,{span:3,children:[(0,y.tZ)(U,{children:"ADD"}),(0,y.tZ)(l.Qr,{name:"couponRegisterModels[".concat(n,"].couponRegisterInfoModels[").concat(t,"].memberDiopterModel.memberAdd"),control:g,defaultValue:"",render:function(e){var o,r,a,l,u,s,f=e.field,m=(f.ref,f.value),b=(f.label,f.onChange),v=(0,p.Z)(f,T);return e.fieldState,(0,y.tZ)(i.jL,OrderBioCouponSection_objectSpread({disabled:!0,placeholder:"선택",value:m,onChange:function(e){b(e),handleChangeDiopter(n,c)},options:(null===(o=d[n])||void 0===o?void 0:null===(r=o[t])||void 0===r?void 0:null===(a=r.options)||void 0===a?void 0:a.add)||[],isDisabled:!(null!==(l=d[n])&&void 0!==l&&null!==(u=l[t])&&void 0!==u&&null!==(s=u.options)&&void 0!==s&&s.add)},v))}})]})]})},t)})]}),e.giftProductQuantity>0&&(0,y.BX)(y.HY,{children:[(0,y.tZ)(i.n,{}),(0,y.tZ)(C.Z,{gutter:[24,24],children:Array.from({length:e.giftProductQuantity}).map(function(o,t){var u=t+e.salesProductQuantity;return(0,y.tZ)(O.Z,{span:24,children:(0,y.BX)(C.Z,{gutter:24,align:"middle",children:[(0,y.BX)(O.Z,{span:9,children:[(0,y.tZ)(U,{children:"증정제품"}),(0,y.tZ)(l.Qr,{name:"couponRegisterModels[".concat(n,"].couponRegisterInfoModels[").concat(u,"].productType"),defaultValue:"GIFT_PRODUCT",control:g,render:function(){return null}}),(0,y.tZ)(l.Qr,{name:"couponRegisterModels[".concat(n,"].couponRegisterInfoModels[").concat(u,"].productId"),control:g,disabled:a,render:function(o){var t=o.field,n=(t.ref,t.value),r=(t.label,t.onChange),i=(0,p.Z)(t,K);return o.fieldState,(0,y.tZ)(Z.Z,OrderBioCouponSection_objectSpread({style:{width:"100%"},options:null==e?void 0:e.giftDropData,value:n,onChange:function(o){if(o){r(o);var t=o[o.length-1];ea(e.couponId,er,t,u,c)}else r(o),handleResetProduct(e.couponId,u,c)},placeholder:a?"":"증정제품",multiple:!1},i))}})]}),(0,y.tZ)(O.Z,{span:3,children:(0,y.tZ)(l.Qr,{name:"couponRegisterModels[".concat(n,"].couponRegisterInfoModels[").concat(u,"].memberDiopterModel.eyeSide"),control:g,defaultValue:"left",disabled:r,render:function(e){var o=e.field,t=(o.ref,o.value),r=o.onChange,a=(0,p.Z)(o,G);return e.fieldState,(0,y.tZ)(i.Tr,OrderBioCouponSection_objectSpread({onChange:function(e){r(e),handleChangeEyeSide(n,u,c)},options:[{key:1,value:"left",label:"좌"},{key:2,value:"right",label:"우"}],value:t},a))}})}),(0,y.BX)(O.Z,{span:3,children:[(0,y.tZ)(U,{children:"근시"}),(0,y.tZ)(l.Qr,{name:"couponRegisterModels[".concat(n,"].couponRegisterInfoModels[").concat(u,"].memberDiopterModel.memberMyopia"),control:g,defaultValue:"",render:function(e){var o,t,r,a,l,s,f,m,b,v=e.field,g=(v.ref,v.value),h=(v.label,v.onChange),S=(0,p.Z)(v,Y);return e.fieldState,(0,y.tZ)(i.jL,OrderBioCouponSection_objectSpread({placeholder:"선택",value:g,onChange:function(e){h(e),handleChangeDiopter(n,c)},options:(null===(o=d[n])||void 0===o?void 0:null===(t=o[u])||void 0===t?void 0:null===(r=t.options)||void 0===r?void 0:r.myopia)||[],isDisabled:!(null!==(a=d[n])&&void 0!==a&&null!==(l=a[u])&&void 0!==l&&null!==(s=l.options)&&void 0!==s&&s.myopia)||(null===(f=d[n])||void 0===f?void 0:null===(m=f[u])||void 0===m?void 0:null===(b=m.options)||void 0===b?void 0:b.myopia.length)===0},S))}})]}),(0,y.BX)(O.Z,{span:3,children:[(0,y.tZ)(U,{children:"난시"}),(0,y.tZ)(l.Qr,{name:"couponRegisterModels[".concat(n,"].couponRegisterInfoModels[").concat(u,"].memberDiopterModel.memberAsti"),control:g,defaultValue:"",render:function(e){var o,t,r,a,l,s,f,m,b,v=e.field,g=(v.ref,v.value),h=(v.label,v.onChange),S=(0,p.Z)(v,H);return e.fieldState,(0,y.tZ)(i.jL,OrderBioCouponSection_objectSpread({placeholder:"선택",value:g,onChange:function(e){h(e),handleChangeDiopter(n,c)},options:(null===(o=d[n])||void 0===o?void 0:null===(t=o[u])||void 0===t?void 0:null===(r=t.options)||void 0===r?void 0:r.asti)||[],isDisabled:!(null!==(a=d[n])&&void 0!==a&&null!==(l=a[u])&&void 0!==l&&null!==(s=l.options)&&void 0!==s&&s.asti)||(null===(f=d[n])||void 0===f?void 0:null===(m=f[u])||void 0===m?void 0:null===(b=m.options)||void 0===b?void 0:b.asti.length)===0},S))}})]}),(0,y.BX)(O.Z,{span:3,children:[(0,y.tZ)(U,{children:"축"}),(0,y.tZ)(l.Qr,{name:"couponRegisterModels[".concat(n,"].couponRegisterInfoModels[").concat(u,"].memberDiopterModel.memberAxis"),control:g,defaultValue:"",render:function(e){var o,t,r,a,l,s,f,m,b,v=e.field,g=(v.ref,v.value),h=(v.label,v.onChange),S=(0,p.Z)(v,q);return e.fieldState,(0,y.tZ)(i.jL,OrderBioCouponSection_objectSpread({placeholder:"선택",value:g,onChange:function(e){h(e),handleChangeDiopter(n,c)},options:(null===(o=d[n])||void 0===o?void 0:null===(t=o[u])||void 0===t?void 0:null===(r=t.options)||void 0===r?void 0:r.axis)||[],isDisabled:!(null!==(a=d[n])&&void 0!==a&&null!==(l=a[u])&&void 0!==l&&null!==(s=l.options)&&void 0!==s&&s.axis)||(null===(f=d[n])||void 0===f?void 0:null===(m=f[u])||void 0===m?void 0:null===(b=m.options)||void 0===b?void 0:b.axis.length)===0},S))}})]}),(0,y.BX)(O.Z,{span:3,children:[(0,y.tZ)(U,{children:"ADD"}),(0,y.tZ)(l.Qr,{name:"couponRegisterModels[".concat(n,"].couponRegisterInfoModels[").concat(u,"].memberDiopterModel.memberAdd"),control:g,defaultValue:"",render:function(e){var o,t,r,a,l,s,f,m,b,v=e.field,g=(v.ref,v.value),h=(v.label,v.onChange),S=(0,p.Z)(v,z);return e.fieldState,(0,y.tZ)(i.jL,OrderBioCouponSection_objectSpread({disabled:!0,placeholder:"선택",value:g,onChange:function(e){h(e),handleChangeDiopter(n,c)},options:(null===(o=d[n])||void 0===o?void 0:null===(t=o[u])||void 0===t?void 0:null===(r=t.options)||void 0===r?void 0:r.add)||[],isDisabled:!(null!==(a=d[n])&&void 0!==a&&null!==(l=a[u])&&void 0!==l&&null!==(s=l.options)&&void 0!==s&&s.add)||(null===(f=d[n])||void 0===f?void 0:null===(m=f[u])||void 0===m?void 0:null===(b=m.options)||void 0===b?void 0:b.add.length)===0},S))}})]})]})},u)})})]})]}),(0,y.tZ)(i.n,{border:!1})]},e.couponId)})]})},W={name:"14917t9",styles:"background:#f0f2f5"},F={name:"1k8meq3",styles:"font-size:30px"},J={name:"bcffy2",styles:"display:flex;align-items:center;justify-content:space-between"},$=t(16835),ee=t(76008);function OrderCouponCardStatusSection_ownKeys(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,n)}return t}function OrderCouponCardStatusSection_objectSpread(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?OrderCouponCardStatusSection_ownKeys(Object(t),!0).forEach(function(o){(0,r.Z)(e,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):OrderCouponCardStatusSection_ownKeys(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})}return e}var OrderCouponCardStatusSection_OrderCouponCardStatusSection=function(e){var o=e.couponCardList,t=e.setSelectedCards,n=e.selectedCards;e.watch,e.setValue;var r=(0,c.useRef)(null),a=(0,m.I0)(),l=(0,ee.T2)({onDrag:function(e){var o=(0,$.Z)(e.offset,1)[0];r.current&&(r.current.scrollLeft+=-1*o)}}),handleCardClick=function(e){t(function(o){return o.includes(e.couponId)?o.filter(function(o){return o!==e.couponId}):[].concat((0,j.Z)(o),[e.couponId])});var o={couponId:e.couponId,couponIssueId:e.couponIssueId};a((0,v.Hh)({params:o}))};return(0,y.BX)(i._L,{children:[(0,y.tZ)(f.default,{title:"사용 쿠폰"}),o?(0,y.tZ)("div",OrderCouponCardStatusSection_objectSpread(OrderCouponCardStatusSection_objectSpread({},l()),{},{ref:r,css:eo,children:null==o?void 0:o.map(function(e){return(0,y.tZ)("div",{css:[er,n.includes(e.couponId)?ea:et,"",""],onClick:function(){return handleCardClick(e)},children:(0,y.tZ)(I.Z,{title:"".concat(e.couponType),bordered:!0,css:en,children:(0,y.tZ)("p",{children:"".concat(e.couponName)})})},e.couponId)})})):null]})},eo={name:"bss8o3",styles:"display:flex;overflow-x:auto;padding:10px 0;margin:0 -8px;gap:20px"},et={name:"1slu5q2",styles:"width:300px;text-align:center;cursor:pointer;transition:transform 0.3s,box-shadow 0.3s;&:hover{transform:translateY(-10px);box-shadow:0 4px 8px rgba(0, 0, 0, 0.2);}"},en={name:"1d3w5wq",styles:"width:100%"},er={name:"ou8xsw",styles:"flex:0 0 auto"},ea={name:"wa09bp",styles:"width:300px;cursor:pointer;border:1px solid black;text-align:center;transform:translateY(-10px);box-shadow:0 4px 8px rgba(0, 0, 0, 0.2)"};t(65294);var ei=t(95966);function OrderCouponSalesAddTemplate_ownKeys(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,n)}return t}function OrderCouponSalesAddTemplate_objectSpread(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?OrderCouponSalesAddTemplate_ownKeys(Object(t),!0).forEach(function(o){(0,r.Z)(e,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):OrderCouponSalesAddTemplate_ownKeys(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})}return e}var OrderCouponSalesAddTemplate=function(e){(0,a.Z)(e);var o=(0,m.I0)(),t=(0,m.v9)(function(e){return e.couponOrder.orderUserListData}),n=(0,m.v9)(function(e){return e.couponOrder.orderReserveData}),r=(0,m.v9)(function(e){return e.couponOrder.dropData}),s=(0,c.useState)({memberId:"",myopiaLeft:"",astiLeft:"",axisLeft:"",myopiaRight:"",astiRight:"",axisRight:""}),p=s[0],f=s[1],b=(0,c.useState)([]),g=b[0],h=b[1],S=(0,c.useState)([]),M=S[0],I=S[1],C=(0,u.useRouter)(),Z=(0,l.cI)();Z.register,Z.handleSubmit,Z.control;var O=Z.setValue,R=Z.getValues,D=Z.watch;Z.reset,(0,c.useEffect)(function(){return function(){o((0,v.Fq)())}},[]);var checkForInvalidValues=function(e){var o=!0;return e.forEach(function(e){var t=n.findIndex(function(o){return o.couponIssueId===e.couponIssueId});e.couponRegisterInfoModels.forEach(function(e,n){var r,a,i,l,d,c,u,s,p,f,m,b,v=null===(r=M[t])||void 0===r?void 0:null===(a=r[n])||void 0===a?void 0:null===(i=a.options)||void 0===i?void 0:i.myopia,g=null===(l=M[t])||void 0===l?void 0:null===(d=l[n])||void 0===d?void 0:null===(c=d.options)||void 0===c?void 0:c.asti,h=null===(u=M[t])||void 0===u?void 0:null===(s=u[n])||void 0===s?void 0:null===(p=s.options)||void 0===p?void 0:p.axis,y=null===(f=M[t])||void 0===f?void 0:null===(m=f[n])||void 0===m?void 0:null===(b=m.options)||void 0===b?void 0:b.add;if((null==v?void 0:v.length)>0&&!e.memberDiopterModel.memberMyopia||(null==g?void 0:g.length)>0&&!e.memberDiopterModel.memberAsti||(null==h?void 0:h.length)>0&&!e.memberDiopterModel.memberAxis||(null==y?void 0:y.length)>0&&!e.memberDiopterModel.memberAdd||!e.productId){o=!1;return}})}),o};return(0,y.BX)(y.HY,{children:[(0,y.tZ)(d.Z,{title:"\uD83D\uDC49\uD83C\uDFFC 관리자가 쿠폰판매를 등록할 수 있는 페이지입니다."}),(0,y.tZ)(i.n,{border:!1}),(0,y.tZ)(l.RV,OrderCouponSalesAddTemplate_objectSpread(OrderCouponSalesAddTemplate_objectSpread({},Z),{},{children:(0,y.BX)(i.l0,{children:[(0,y.tZ)(i._L,{size:"default",bordered:!1,children:(0,y.tZ)(OrderCouponSection_OrderUserSection,{storeData:t,onSearch:function(e){o((0,v.dP)({params:e}))},setUserData:f})}),(0,y.tZ)(i.n,{border:!1}),n.length>0&&(0,y.BX)(y.HY,{children:[(0,y.tZ)(OrderCouponCardStatusSection_OrderCouponCardStatusSection,{couponCardList:n,setSelectedCards:h,selectedCards:g,watch:D,setValue:O}),(0,y.tZ)(i.n,{border:!1})]}),(null==r?void 0:r.length)>0&&(0,y.BX)(y.HY,{children:[(0,y.tZ)(OrderCouponCardStatusSection_OrderBioCouponSection,{couponCardList:n,couponDropData:r,userData:p,setSelectedCards:h,selectedCards:g,optionData:M,setOptionData:I}),(0,y.tZ)(i.n,{border:!1})]}),(0,y.tZ)(i._L,{children:(0,y.BX)(i.sw,{justify:"space-between",children:[(0,y.tZ)(i.EK,{type:"default",name:"이전",htmlType:"button",onClick:function(){return C.push("admin/order/point-sales")}}),(0,y.tZ)(i.EK,{type:"primary",name:"판매 등록",onClick:function(){var e,t=R().couponRegisterModels,n=(null==t?void 0:t.filter(function(e){return r.some(function(o){return o.couponIssueId===e.couponIssueId})})).map(function(e){var o=e.couponRegisterInfoModels.map(function(e){return Array.isArray(e.productId)?OrderCouponSalesAddTemplate_objectSpread(OrderCouponSalesAddTemplate_objectSpread({},e),{},{productId:e.productId[e.productId.length-1]}):e});return OrderCouponSalesAddTemplate_objectSpread(OrderCouponSalesAddTemplate_objectSpread({},e),{},{couponRegisterInfoModels:o})});n.forEach(function(e){var o=r.find(function(o){return o.couponIssueId===e.couponIssueId});if(o&&"SYNC_SALE_ON"===o.syncSaleGiftStatus){var t=e.couponRegisterInfoModels[0].productId;e.couponRegisterInfoModels.forEach(function(e){e.productId=t})}});var a={memberId:p.memberId,couponRegisterModels:n},i=!1;if((null==a?void 0:null===(e=a.couponRegisterModels)||void 0===e?void 0:e.length)>0&&(i=checkForInvalidValues(a.couponRegisterModels)),i){var replaceEmptyStringsWithNull=function replaceEmptyStringsWithNull(e){for(var o in e)"object"==typeof e[o]&&null!==e[o]?replaceEmptyStringsWithNull(e[o]):""===e[o]&&(e[o]=null),"eyeSide"===o&&(e[o]=null)};null==a||a.couponRegisterModels.forEach(function(e){return replaceEmptyStringsWithNull(e)}),o((0,v.OM)({sendObject:a,callback:C}))}else o((0,ei.lh)({message:"제품 또는 도수정보를 확인해주세요"}))}})]})})]})}))]})},orderCouponSalesPageSub=function(){return(0,y.tZ)(y.HY,{children:(0,y.tZ)(OrderCouponSalesAddTemplate,{})})};orderCouponSalesPageSub.getLayout=function(e){return(0,y.tZ)(n.L,{children:e})};var el=orderCouponSalesPageSub},18695:function(e,o,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/order/coupon-sales/sub",function(){return t(92818)}])}},function(e){e.O(0,[6008,9774,2888,179],function(){return e(e.s=18695)}),_N_E=e.O()}]);